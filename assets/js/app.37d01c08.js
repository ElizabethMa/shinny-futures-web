(function(t){function e(e){for(var n,a,o=e[0],c=e[1],l=e[2],u=0,d=[];u<o.length;u++)a=o[u],s[a]&&d.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);h&&h(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},s={app:0},r=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/shinny-futures-web/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var h=c;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0749":function(t,e,i){"use strict";var n=i("b885"),s=i.n(n);s.a},"0894":function(t,e,i){"use strict";var n=i("2262"),s=i.n(n);s.a},"0be0":function(t,e,i){"use strict";i.d(e,"a",function(){return r});i("ac6a");var n=i("d4ec"),s=i("bee2"),r=function(){function t(){Object(n["a"])(this,t),this.handlers={},this.on=this.addEventListener,this.emit=this.fire,this.off=this.removeEventListener}return Object(s["a"])(t,[{key:"addEventListener",value:function(e,i){var n=this;t.ToArray(e).forEach(function(t){(n.handlers[t]||(n.handlers[t]=[])).push(i)})}},{key:"removeEventListener",value:function(e,i){var n=this;t.ToArray(e).forEach(function(t){if(n.handlers[t]instanceof Array){for(var e=n.handlers[t],s=0;s<e.length;s++)if(e[s]===i){n.handlers[t].splice(s,1);break}0===n.handlers[t].length&&delete n.handlers[t]}})}},{key:"fire",value:function(t,e){if(this.handlers[t]instanceof Array)for(var i=this.handlers[t],n=0;n<i.length;n++)i[n](e)}}],[{key:"ToArray",value:function(t){return Array.isArray(t)?t:[t]}}]),t}()},1578:function(t,e,i){},"1f5e":function(t,e,i){"use strict";var n=i("5291"),s=i.n(n);s.a},2262:function(t,e,i){},2770:function(t,e,i){},"2b71":function(t,e,i){"use strict";var n=i("1578"),s=i.n(n);s.a},"491c":function(t,e,i){},"4bbc":function(t,e,i){},5291:function(t,e,i){},"55b5":function(t,e,i){"use strict";var n=i("2770"),s=i.n(n);s.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Layout",{attrs:{id:"shinny-app"}},[i("Sider",{staticClass:"sider",attrs:{width:"60"}},[i("Tooltip",{attrs:{content:"设置",placement:"right"}},[i("Button",{attrs:{type:"text",size:"small",to:"https://www.shinnytech.com/tianqin/",target:"_blank"}},[i("Icon",{attrs:{type:"md-settings",size:"40"}})],1)],1),i("Tooltip",{attrs:{content:"打开天勤主页",placement:"right"}},[i("Button",{attrs:{type:"text",size:"small",to:"https://www.shinnytech.com/tianqin/",target:"_blank"}},[i("Icon",{attrs:{type:"md-share-alt",size:"40"}})],1)],1)],1),i("Content",{staticClass:"content"},[i("Split",{attrs:{mode:"vertical"},model:{value:t.$root.appSplit,callback:function(e){t.$set(t.$root,"appSplit",e)},expression:"$root.appSplit"}},[i("div",{staticClass:"split-pane",attrs:{slot:"top"},slot:"top"},[i("keep-alive",[i("router-view",{attrs:{name:"quotes"}})],1)],1),i("div",{staticClass:"split-horizontal",attrs:{slot:"trigger"},slot:"trigger"},[i("div",{staticClass:"split-horizontal-dots"},[i("span",{staticClass:"dot"}),i("span",{staticClass:"dot"}),i("span",{staticClass:"dot"}),i("span",{staticClass:"dot"}),i("span",{staticClass:"dot"})])]),i("div",{staticClass:"split-pane",attrs:{slot:"bottom"},slot:"bottom"},[i("router-view",{attrs:{name:"user"}})],1)])],1)],1)},r=[],a={data:function(){return{}},computed:{quoteWsConnected:function(){return this.$store.state.quoteWsConnected},tradeWsConnected:function(){return this.$store.state.tradeWsConnected}}},o=a,c=(i("5c0b"),i("2877")),l=Object(c["a"])(o,s,r,!1,null,null,null);l.options.__file="App.vue";var h=l.exports,u=i("8c4f"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"quotes-container",staticStyle:{height:"100%"}},[i("SplitLeftRight",{attrs:{split:.8}},[i("template",{slot:"left"},[i("div",{staticClass:"top-content"},[i("ButtonsLine",{attrs:{tags:t.tags,defaultTag:t.defaultTag},on:{change:t.handlerChangeTag}})],1),i("div",{staticClass:"bottom-content",staticStyle:{top:"28px"}},[i("table-quotes",{attrs:{contentList:t.quotesList,tableCol:t.quotesTableRow,rootPath:t.rootPath}})],1)]),i("template",{slot:"right"},[i("div",{staticClass:"top-content"},[i("quote-info",{attrs:{instrumentId:t.instrumentId}})],1),i("div",{staticClass:"bottom-content",staticStyle:{top:"220px"}},[i("ticks-list",{attrs:{instrumentId:t.instrumentId}})],1)])],2)],1)},_=[],m=(i("a481"),i("be94")),f=i("2f62"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-table-container",style:{height:"100%"},on:{scroll:t.handleScroll}},[i("table",{attrs:{id:"QuotesTable"}},[i("thead",[i("tr",t._l(t.tableCol,function(e){return i("td",[i("div",{style:t.computeStyleObj(e)},[t._v(t._s(e["name"]))])])}))]),i("tbody",t._l(t.contentList,function(e,n){return i("table-row",{key:e,class:{selected:e===t.selectedSymbol},attrs:{symbol:e,path:t.rootPath+e+"/",tableCol:t.tableCol},on:{rowClick:t.rowClick,rowDbClick:t.rowDbClick}})}))])])},g=[],b=(i("6762"),i("2fdb"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{on:{click:t.handlerClick,dblclick:t.handlerDbClick}},[i("td",[i("div",[t._v(t._s(t.ins_name))]),i("div",{staticClass:"appendix"},[t._v(t._s(t.ins_id))])]),t._l(t.tableCol,function(e,n){return n>0?i("td",{class:t.classNameStr(e)},[i("div",{staticClass:"data-content",style:t.styleObj(e),attrs:{"data-content":t.formatter(e)}})]):t._e()})],2)}),v=[],y={data:function(){return{priceDecs:0,priceTick:1,ins_id:"",ins_name:"",quote:{}}},components:{},props:{tableCol:{type:Array},symbol:{type:String},path:{type:String}},beforeMount:function(){this.quote=this.getQuote(this.symbol),this.priceDecs=this.quote.price_decs,this.priceTick=this.quote.price_tick,this.ins_name=this.quote.ins_name,"FUTURE_CONT"===this.quote.class?this.ins_id=this.quote.underlying_symbol:"FUTURE_INDEX"===this.quote.class?this.ins_id=this.quote.underlying_product:this.ins_id=this.quote.instrument_id},mounted:function(){},updated:function(){},beforeDestroy:function(){},computed:Object(m["a"])({},Object(f["b"])({getQuote:"quotes/GET_QUOTE"})),methods:{classNameStr:function(t){return"function"===typeof t["className"]?t["className"](this.quote):t["className"]},styleObj:function(t){var e={};return t["width"]&&(e["width"]=t["width"]+"px"),e},formatter:function(t){return t.formatter?t.formatter(this.quote):this.quote[t.prop]},handlerClick:function(){this.$emit("rowClick",this.quote)},handlerDbClick:function(){this.$emit("rowDbClick",this.quote)},handlerRowContextmenu:function(t){t.stopPropagation(),t.preventDefault(),this.$emit("rowContextmenu",this.quote)}}},w=y,k=Object(c["a"])(w,b,v,!1,null,null,null);k.options.__file="TableQuotesRow.vue";var E=k.exports,T={data:function(){return{selectedSymbol:""}},components:{TableRow:E},props:{height:{type:String},tableCol:{type:Array},contentList:{type:Array},rootPath:{type:String}},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},mounted:function(){},beforeDestroy:function(){},computed:{},methods:{handleScroll:function(t){},computeStyleObj:function(t){var e={};return t["width"]&&(e["width"]=t["width"]+"px"),e},rowClick:function(t){this.$store.commit("SET_SELECTED_SHOW_SYMBOL",t.instrument_id),"FUTURE"===t.class?this.$store.commit("SET_SELECTED_SYMBOL",t.instrument_id):"FUTURE_CONT"===t.class&&this.$store.commit("SET_SELECTED_SYMBOL",t.underlying_symbol),this.selectedSymbol=t.instrument_id},rowDbClick:function(t){this.$router.push({name:"charts",params:{instrument_id:t.instrument_id}})},cellStyle:function(t){var e=t.row,i=t.column;t.rowIndex,t.columnIndex;return["最新价","涨跌","涨跌幅","今开盘","最高价","最低价"].includes(i.label)&&e.change%1===0&&0!==e.change?{color:e.change>0?"red":"green"}:{color:"black"}}}},S=T,O=(i("ab6f"),Object(c["a"])(S,p,g,!1,null,null,null));O.options.__file="Table.vue";var C=O.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.quote?i("div",{staticClass:"quoteinfo-container"},[i("Row",[i("Col",{attrs:{span:"12"}},[i("div",[t._v(t._s(t.quote.ins_name))])]),i("Col",{attrs:{span:"12"}},[i("div",[t._v(t._s(t.instrumentId))])])],1),i("div",{staticClass:"contrast"},[i("Row",[i("Col",{attrs:{span:"6"}},[i("div",[t._v("卖一")])]),i("Col",{attrs:{span:"6"}},[i("div",[t._v(t._s(t.formatter(t.quote.ask_price1)))])]),i("Col",{attrs:{span:"6"}},[t._v("\n            "+t._s(t.quote.ask_volume1)+"\n            ")]),i("Col",{attrs:{span:"6"}})],1),i("div",{staticClass:"outer"},[i("div",{staticClass:"inner",style:{width:100*t.innerWidth+"%"}})]),i("Row",[i("Col",{attrs:{span:"6"}},[t._v("\n            买一")]),i("Col",{attrs:{span:"6"}},[t._v("\n            "+t._s(t.formatter(t.quote.bid_price1)))]),i("Col",{attrs:{span:"6"}},[t._v("\n            "+t._s(t.quote.bid_volume1))]),i("Col",{attrs:{span:"6"}})],1)],1),i("Row",[i("Col",{attrs:{span:"6"}},[t._v("\n        最新价")]),i("Col",{class:t.classOfColor,attrs:{span:"6"}},[t._v("\n        "+t._s(t.formatter(t.quote.last_price)))]),i("Col",{attrs:{span:"6"}},[t._v("\n        昨结算")]),i("Col",{attrs:{span:"6"}},[t._v("\n        "+t._s(t.formatter(t.quote.pre_settlement)))])],1),i("Row",[i("Col",{attrs:{span:"6"}},[t._v("\n        涨跌")]),i("Col",{class:t.classOfColor,attrs:{span:"6"}},[t._v("\n        "+t._s(t.formatter(t.quote.change)))]),i("Col",{attrs:{span:"6"}},[t._v("\n        今开")]),i("Col",{attrs:{span:"6"}},[t._v("\n        "+t._s(t.quote.open))])],1),i("Row",[i("Col",{attrs:{span:"6"}},[t._v("\n        涨跌幅")]),i("Col",{class:t.classOfColor,attrs:{span:"6"}},[t._v("\n        "+t._s(t.change_present))]),i("Col",{attrs:{span:"6"}},[t._v("\n        最高")]),i("Col",{attrs:{span:"6"}},[t._v("\n        "+t._s(t.formatter(t.quote.highest)))])],1),i("Row",[i("Col",{attrs:{span:"6"}},[t._v("\n        总手")]),i("Col",{class:t.classOfColor,attrs:{span:"6"}},[t._v("\n        "+t._s(t.quote.volume))]),i("Col",{attrs:{span:"6"}},[t._v("\n        最低")]),i("Col",{attrs:{span:"6"}},[t._v("\n        "+t._s(t.formatter(t.quote.lowest)))])],1),i("Row",[i("Col",{attrs:{span:"6"}},[t._v("\n        涨停")]),i("Col",{staticClass:"R",attrs:{span:"6"}},[t._v("\n        "+t._s(t.formatter(t.quote.upper_limit)))]),i("Col",{attrs:{span:"6"}},[t._v("\n        收盘")]),i("Col",{attrs:{span:"6"}},[t._v("\n        "+t._s(t.formatter(t.quote.close)))])],1),i("Row",[i("Col",{attrs:{span:"6"}},[t._v("\n        跌停")]),i("Col",{staticClass:"G",attrs:{span:"6"}},[t._v("\n        "+t._s(t.formatter(t.quote.lower_limit)))]),i("Col",{attrs:{span:"6"}},[t._v("\n        结算")]),i("Col",{attrs:{span:"6"}},[t._v("\n        "+t._s(t.formatter(t.quote.settlement)))])],1),i("Row",[i("Col",{attrs:{span:"6"}},[t._v("\n        持仓量")]),i("Col",{attrs:{span:"6"}},[t._v("\n        "+t._s(t.quote.open_interest))]),i("Col",{attrs:{span:"6"}},[t._v("\n        日增")]),i("Col",{attrs:{span:"6"}},[t._v("\n        "+t._s(t.quote.open_interest-t.quote.pre_open_interest))])],1)],1):t._e()},x=[];i("f576"),i("28a5");function P(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i="",n=0;n<t;n++)i+=e[62*Math.random()|0];return i}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"number"===typeof t?t.toFixed(e):t}function I(t){var e=null;if("number"===typeof t){e=t>1e12&&t<3e12?new Date(t):new Date(t/1e6);var i=e.getFullYear()+"",n=(e.getMonth()+1+"").padStart(2,"0"),s=(e.getDate()+"").padStart(2,"0"),r=(e.getHours()+"").padStart(2,"0"),a=(e.getMinutes()+"").padStart(2,"0"),o=(e.getSeconds()+"").padStart(2,"0"),c=(e.getMilliseconds()+"").padStart(3,"0");return i+"/"+n+"/"+s+"-"+r+":"+a+":"+o+"."+c}return e}function N(t){switch(t){case"BUY":return"买";case"SELL":return"卖";default:return t}}function L(t){switch(t){case"OPEN":return"开";case"CLOSE":return"平昨";case"CLOSETODAY":return"平今";default:return t}}var A={data:function(){return{}},props:{instrumentId:String},computed:{classOfColor:function(){return this.quote["change"]>0?"R":this.quote["change"]<0?"G":""},innerWidth:function(){return this.quote.bid_volume1/(this.quote.bid_volume1+this.quote.ask_volume1)},quote:function(){return this.$store.getters["quotes/GET_QUOTE"](this.instrumentId)},change_present:function(){var t=j(this.quote["change"]/this.quote["pre_settlement"]*100,2);return isNaN(t)?"-":t+"%"}},methods:{formatter:function(t){return j(t,this.quote.price_decs)}}},R=A,M=(i("0749"),Object(c["a"])(R,D,x,!1,null,"eee12218",null));M.options.__file="QuoteInfo.vue";var q=M.exports,U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tickslist-container",style:{height:t.height}},[i("table",[t._m(0),t.quote?i("tbody",t._l(t.ticks,function(e,n){return i("tr",{key:n},[i("td",[t._v(t._s(e.dt))]),i("td",{class:e.textColor},[t._v(t._s(e.price))]),i("td",{class:e.textColor},[t._v(t._s(e.vol))]),i("td",[t._v(t._s(e.oi))]),i("td",{class:e.textColor},[t._v(t._s(e.msg))])])})):t._e()])])},W=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("td",[t._v("时间")]),i("td",[t._v("价位")]),i("td",[t._v("现手")]),i("td",[t._v("增仓")]),i("td",[t._v("开平")])])])}],$=i("dfaa"),B=i("53ca"),F=(i("ac6a"),i("456d"),i("d4ec")),H=i("bee2"),G=i("99de"),z=i("7e84"),Q=i("262e"),Y=i("0be0"),K=function(t){function e(){var t;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(F["a"])(this,e),t=Object(G["a"])(this,Object(z["a"])(e).call(this)),t._data={},t._epoch=0,t}return Object(Q["a"])(e,t),Object(H["a"])(e,[{key:"getByPath",value:function(t){for(var e=Z(t),i=this._data,n=0;n<e.length;n++)if(i=i[e[n]],void 0===i)break;return n<e.length-1?{}:i}},{key:"asyncGetByPath",value:function(t,e){var i=this.getByPath(t);e(i)}},{key:"mergeData",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(i&&(this._epoch+=1),Array.isArray(t))for(var s in t)Object.keys(t[s]).length>0&&e.mergeObject(this._data,t[s],this._epoch,n);else e.mergeObject(this._data,t,this._epoch,n);for(var r in this.handlers){var a=Z(r),o=this.isChanging(a,t);o&&this.fire(r,this.getByPath(a))}}},{key:"isChanging",value:function(t,e){for(var i=Z(t),n=this._data,s=0;s<i.length;s++)if(n=n[i[s]],void 0===n)return!1;if("object"===Object(B["a"])(n))return!(!n._epoch||n._epoch!==this._epoch);if(e){for(var r=e,a=0;a<i.length;a++)if(r=r[i[a]],void 0===r)return!1;return!0}return!1}},{key:"subscribe",value:function(t,e){this.addEventListener(t,e)}},{key:"unsubscribe",value:function(t,e){this.removeEventListener(t,e)}}],[{key:"mergeObject",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];for(var r in i){var a=i[r];switch(Object(B["a"])(a)){case"object":if(null===a){s&&r&&delete t[r];continue}Array.isArray(a)||"data"===r?r in t||(t[r]=[]):r in t||(t[r]={}),"quotes"===r?e.mergeObject(t[r],a,n,!1):e.mergeObject(t[r],a,n,s);break;case"string":case"boolean":case"number":t[r]="NaN"===a?NaN:a;break;case"undefined":break}}t["_epoch"]||Object.defineProperty(t,"_epoch",{configurable:!1,enumerable:!1,writable:!0}),t["_epoch"]=n}}]),e}(Y["a"]);function Z(t){return t instanceof Array||(t=t.split("/")),t.filter(function(t){return""!==t})}var X="https://openmd.shinnytech.com/t/md/symbols/latest.json",J="wss://openmd.shinnytech.com/t/md/front/mobile",V="wss://t.shinnytech.com/trade/shinny",tt={bid:"快期模拟"};var et=[{name:"合约代码",prop:"instrument_id",width:100},{name:"最新价",prop:"last_price",width:60,className:function(t){return t["change"]>0?"R":t["change"]<0?"G":""},formatter:function(t){return j(t["last_price"],t["price_decs"])}},{name:"时间",prop:"datetime",width:100,formatter:function(t){return t["datetime"].slice(11,23)}},{name:"买价",prop:"bid_price1",width:60,className:"col-buy",formatter:function(t){return j(t["bid_price1"],t["price_decs"])}},{name:"买量",prop:"bid_volume1",width:60,className:"col-buy"},{name:"卖价",prop:"ask_price1",width:60,className:"col-sell",formatter:function(t){return j(t["ask_price1"],t["price_decs"])}},{name:"卖量",prop:"ask_volume1",width:60,className:"col-sell"},{name:"涨跌",prop:"change",width:60,className:function(t){return t["change"]>0?"R":t["change"]<0?"G":""},formatter:function(t){return j(t["change"],t["price_decs"])}},{name:"涨跌幅",prop:"change_percent",width:60,className:function(t){return t["change"]>0?"R":t["change"]<0?"G":""},formatter:function(t){var e=j(t["change"]/t["pre_settlement"]*100,2);return isNaN(e)?"-":e+"%"}},{name:"成交量",prop:"volume",width:60,className:function(t){return t["change"]>0?"R":t["change"]<0?"G":""}},{name:"今开盘",prop:"open",width:60,formatter:function(t){return j(t["open"],t["price_decs"])}},{name:"收盘",prop:"close",width:60,formatter:function(t){return j(t["close"],t["price_decs"])}},{name:"涨停",prop:"upper_limit",width:60,formatter:function(t){return j(t["upper_limit"],t["price_decs"])}},{name:"跌停",prop:"lower_limit",width:60,formatter:function(t){return j(t["lower_limit"],t["price_decs"])}},{name:"最高价",prop:"highest",width:60,formatter:function(t){return j(t["highest"],t["price_decs"])}},{name:"最低价",prop:"lowest",width:60,formatter:function(t){return j(t["lowest"],t["price_decs"])}},{name:"持仓量",prop:"open_interest",width:60},{name:"昨持",prop:"pre_open_interest",width:60},{name:"昨成交",prop:"pre_volume",width:60},{name:"昨收",prop:"pre_close",width:60,formatter:function(t){return j(t["pre_close"],t["price_decs"])}},{name:"昨结算",prop:"pre_settlement",width:60,formatter:function(t){return j(t["pre_settlement"],t["price_decs"])}}],it=new $["a"](J),nt=new $["a"](V),st=new K;function rt(t){it.addEventListener("message",function(e){if("rtn_data"===e.aid)for(var i in e.data)t.commit("MERGE_QUOTE_WS_DATA",e.data[i]);it.send('{"aid":"peek_message"}')}),nt.addEventListener("message",function(e){switch(e.aid){case"rtn_data":for(var i in e.data)t.commit("MERGE_TRADE_WS_DATA",e.data[i]);nt.send('{"aid":"peek_message"}');break;case"rtn_brokers":t.commit("SET_BROKERS",e.brokers)}}),it.addEventListener("open",function(){t.commit("SET_WS_CONNECT_STATUS",{quoteWsConnected:!0})}),nt.addEventListener("open",function(){t.commit("SET_WS_CONNECT_STATUS",{tradeWsConnected:!0})}),it.addEventListener("close",function(){t.commit("SET_WS_CONNECT_STATUS",{quoteWsConnected:!1})}),nt.addEventListener("close",function(){t.commit("SET_WS_CONNECT_STATUS",{tradeWsConnected:!1})}),t.subscribe(function(t){["LOGIN","INSERT_ORDER","CANCEL_ORDER","TRANSFER"].includes(t.type)&&nt.send('{"aid":"peek_message"}')})}it.addEventListener("message",function(t){"rtn_data"===t.aid&&st.mergeData(t.data)});var at={data:function(){return{ticks:[]}},watch:{instrumentId:{handler:function(t,e){this.$store.commit("SET_TICK_CHART",{symbol:t}),this.ticks.splice(0),st.unsubscribe("ticks/"+e,this.update),st.subscribe("ticks/"+t,this.update),this.update(st.getByPath("ticks/"+t))},immediate:!0}},props:{instrumentId:String,height:String},computed:{quote:function(){return this.$store.getters["quotes/GET_QUOTE"](this.instrumentId)}},methods:{genOneTick:function(t,e){var i=e.data[t],n=e.data[t-1];if(this.quote&&i&&n&&i.volume-n.volume>0){var s=i.volume-n.volume,r=i.open_interest-n.open_interest,a={datetime:i.datetime,dt:I(i.datetime).slice(11,19),price:j(i.last_price,this.quote.price_decs),vol:s,oi:r,msg:"",textColor:""},o=i.last_price-n.last_price,c=0;switch(c=i.last_price>=n.ask_price1?1:i.last_price<=n.bid_price1?-1:o>0?1:o<0?-1:0,a.msg=r>0&&r===s?"双开":r<0&&r+s===0?"双平":0===c?"换手":(c>0?"多":"空")+(r>0?"开":r<0?"平":"换"),a.msg){case"双开":case"双平":a.textColor=1===c?"R":-1===c?"G":"";break;case"多开":case"多换":case"空平":a.textColor="R";break;case"空开":case"空换":case"多平":a.textColor="G";break;default:a.textColor="";break}return a}return null},update:function(t){var e=50,i=0;if(t&&t.last_id>0)if(0===this.ticks.length){this.last_id=t.last_id;for(var n=t.last_id;n>=0;n--){var s=this.genOneTick(n,t);if(null!==s&&(this.$set(this.ticks,i,s),i++,i===e))break}}else if(this.last_id<t.last_id){var r=this.genOneTick(t.last_id,t);null!==r&&r.datetime>this.ticks[0].datetime&&this.ticks.splice(0,0,r)}}}},ot=at,ct=(i("2b71"),Object(c["a"])(ot,U,W,!1,null,"55d7331d",null));ct.options.__file="TicksList.vue";var lt=ct.exports,ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Split",{staticClass:"split-container",model:{value:t.this_split,callback:function(e){t.this_split=e},expression:"this_split"}},[i("div",{staticClass:"split-pane left",attrs:{slot:"left"},slot:"left"},[t._t("left")],2),i("div",{staticClass:"split-vertical",attrs:{slot:"trigger"},slot:"trigger"},[i("div",{staticClass:"split-vertical-dots"},[i("span",{staticClass:"dot"}),i("span",{staticClass:"dot"}),i("span",{staticClass:"dot"}),i("span",{staticClass:"dot"}),i("span",{staticClass:"dot"})])]),i("div",{staticClass:"split-pane right",attrs:{slot:"right"},slot:"right"},[t._t("right")],2)])},ut=[],dt=(i("c5f6"),{data:function(){return{this_split:.5}},created:function(){this.this_split=this.split},props:{split:{type:Number}}}),_t=dt,mt=(i("966f"),Object(c["a"])(_t,ht,ut,!1,null,null,null));mt.options.__file="SplitLeftRight.vue";var ft=mt.exports,pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",t._l(t.tags,function(e,n){return i("div",{key:n,staticClass:"col"},[i("Button",{attrs:{size:"small",type:t.type(e)},on:{click:function(i){t.handlerClickTag(e)}}},[t._v("\n                "+t._s(e)+"\n            ")])],1)}))])},gt=[],bt={name:"ButtonsLine",data:function(){return{selectedTag:this.defaultTag?this.defaultTag:this.tags[0]}},props:{tags:{type:Array,required:!0,validator:function(t){return t.length>0}},defaultTag:String},methods:{type:function(t){return t===this.selectedTag?"primary":"default"},handlerClickTag:function(t){this.selectedTag=t,this.$emit("change",t)}}},vt=bt,yt=(i("0894"),Object(c["a"])(vt,pt,gt,!1,null,"8c7ab0d4",null));yt.options.__file="ButtonsLine.vue";var wt=yt.exports,kt={name:"quotes",components:{TableQuotes:C,QuoteInfo:q,TicksList:lt,SplitLeftRight:ft,ButtonsLine:wt},data:function(){var t=this.$route.params.tag;return{defaultTag:t,tags:this.$store.state.tags,quotesTableRow:et,rootPath:"quotes/",selectedTab:"quoteInfo"}},computed:Object(m["a"])({quotesList:function(){var t=this.$store.state.tagsQuotesMap[this.$route.params.tag];return t&&this.$store.commit("SUBSCRIBE_QUOTE",t),t},rowWidth:function(){var t=this.$store.state.tags.join("").length,e=this.$store.state.tags.length;return 12.5*t+20*e}},Object(f["b"])({instrumentId:"getSelectedShowInstrumentId"})),methods:{handlerChangeTag:function(t){this.$router.replace({name:"quotes",params:{tag:t}})}}},Et=kt,Tt=(i("f8fe"),Object(c["a"])(Et,d,_,!1,null,"3f50a2c4",null));Tt.options.__file="Quotes.vue";var St=Tt.exports,Ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%"}},[i("confirm"),0===t.tradingDay.length?i("login"):i("trade")],1)},Ct=[],Dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-trade"},[i("SplitLeftRight",{attrs:{split:t.split}},[i("template",{slot:"left"},[i("Form",{attrs:{"label-width":60}},[i("FormItem",{attrs:{label:"合约"}},[i("AutoComplete",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入合约"},on:{"on-search":t.querySearch},model:{value:t.instrumentId,callback:function(e){t.instrumentId=e},expression:"instrumentId"}},[i("div",{staticClass:"auto-complete-search-result"},t._l(t.searchResult,function(e){return i("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))])],1),i("FormItem",{attrs:{label:"手数"}},[i("InputNumber",{staticStyle:{width:"200px"},attrs:{min:1},model:{value:t.volume,callback:function(e){t.volume=e},expression:"volume"}})],1),i("FormItem",{attrs:{label:"价格"}},[i("InputNumber",{staticStyle:{width:"200px"},attrs:{max:t.maxPrice,min:t.minPrice,step:t.priceTick},model:{value:t.limitPrice,callback:function(e){t.limitPrice=e},expression:"limitPrice"}})],1),i("FormItem",[i("Button",{on:{click:function(e){t.insertOrder("BUY","OPEN")}}},[t._v("买开")]),i("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.insertOrder("SELL","OPEN")}}},[t._v("卖开")])],1),i("FormItem",[i("Button",{on:{click:function(e){t.insertOrder("BUY","CLOSE")}}},[t._v("买平")]),i("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.insertOrder("SELL","CLOSE")}}},[t._v("卖平")])],1)],1)],1),i("template",{slot:"right"},[i("Tabs",{attrs:{type:"card",animated:!1},model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},[i("TabPane",{attrs:{label:"账户",name:"accounts"}},[i("table-accounts")],1),i("TabPane",{attrs:{label:"持仓",name:"positions"}},[i("table-positions",{attrs:{height:t.height}})],1),i("TabPane",{attrs:{label:"委托单",name:"orders"}},[i("table-orders",{attrs:{height:t.height}})],1),i("TabPane",{attrs:{label:"成交记录",name:"trades"}},[i("table-trades",{attrs:{height:t.height}})],1)],1)],1)],2)],1)},xt=[],Pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"accounts-container"},[i("Table",{attrs:{columns:t.columns1,data:[t.account]}}),i("Table",{attrs:{columns:t.columns2,data:[t.account]}})],1)},jt=[],It={data:function(){var t={balance:"账户权益",available:"可用资金",pre_balance:"账户权益",deposit:"入金金额",withdraw:"出金金额",commission:"手续费",premium:"权利金",static_balance:"静态权益",position_profit:"持仓盈亏",float_profit:"浮动盈亏",risk_ratio:"风险度",margin:"占用资金",frozen_margin:"冻结保证金",frozen_commission:"冻结手续费",frozen_premium:"冻结权利金",close_profit:"平仓盈亏"};return{columns1:[{title:t["balance"],key:"balance"},{title:t["available"],key:"available"},{title:t["pre_balance"],key:"pre_balance"},{title:t["deposit"],key:"deposit"},{title:t["withdraw"],key:"withdraw"},{title:t["commission"],key:"commission"}],columns2:[{title:t["static_balance"],key:"static_balance"},{title:t["position_profit"],key:"position_profit"},{title:t["float_profit"],key:"float_profit"},{title:t["close_profit"],key:"close_profit"},{title:t["margin"],key:"margin"},{title:t["risk_ratio"],key:"risk_ratio"}]}},computed:Object(m["a"])({},Object(f["b"])({account:"accounts/GET_ACCOUNT"}))},Nt=It,Lt=(i("1f5e"),Object(c["a"])(Nt,Pt,jt,!1,null,"09b875b1",null));Lt.options.__file="TableAccounts.vue";var At=Lt.exports,Rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Table",{attrs:{height:t.height,columns:t.columns,data:t.positions}})},Mt=[],qt={data:function(){return{columns:[{title:"合约代码",key:"instrument_id",width:80,fixed:"left"},{title:"最新价",key:"last_price",width:80,align:"right",fixed:"left"},{title:"多仓",key:"volume_long",width:50,align:"right",className:"col-buy"},{title:"开仓均价",key:"open_price_long",width:80,align:"right",className:"col-buy",render:this.formatterPrice},{title:"持仓盈亏",key:"position_profit_long",width:80,align:"right",className:"col-buy",render:this.formatterPrice},{title:"操作",key:"action",width:150,align:"center",className:"col-buy",render:this.genButtons},{title:"空仓",key:"volume_short",width:50,align:"right",className:"col-sell"},{title:"开仓均价",key:"open_price_short",width:80,align:"right",className:"col-sell",render:this.formatterPrice},{title:"持仓盈亏",key:"position_profit_short",width:80,align:"right",className:"col-sell",render:this.formatterPrice},{title:"操作",key:"action",width:150,align:"center",className:"col-sell",render:this.genButtons},{title:"持仓占用",key:"margin",width:80,align:"right",render:this.formatterPrice}]}},props:{height:{type:String},loading:{type:Boolean,default:!1}},mounted:function(){},computed:Object(m["a"])({},Object(f["b"])({positions:"positions/GET_POSITIONS"})),methods:{formatterPrice:function(t,e){return t("div",j(e.row[e.column.key]))},genButtons:function(t,e){var i=this,n="col-buy"===e.column.className?"success":"error",s="col-buy"===e.column.className?"SELL":"BUY",r="col-buy"===e.column.className?e.row.volume_long:e.row.volume_short,a=[t("Button",{props:{type:n,size:"small"},style:{marginRight:"5px"},on:{click:function(){i.handleClose(e.index,e.row,s)}}},"平仓"),t("Button",{props:{type:n,size:"small"},style:{marginRight:"5px"},on:{click:function(){i.handleCloseOpen(e.index,e.row,s)}}},"反手")];return t("div",r>0?a:[])},handleClose:function(t,e,i){var n=this.$store.getters["quotes/GET_QUOTE"](e.exchange_id+"."+e.instrument_id),s="BUY"===i?e.volume_short:e.volume_long;this.$store.commit("INSERT_ORDER",{symbol:n.instrument_id,exchange_id:n.exchange_id,ins_id:n.ins_id,direction:i,offset:"CLOSE",limitPrice:n.last_price,volume:s})},handleCloseOpen:function(t,e,i){var n=this.$store.getters["quotes/GET_QUOTE"](e.exchange_id+"."+e.instrument_id),s="BUY"===i?e.volume_short:e.volume_long;this.$store.commit("INSERT_ORDER",{symbol:n.instrument_id,exchange_id:n.exchange_id,ins_id:n.ins_id,direction:i,offset:"CLOSE",limitPrice:n.last_price,volume:s}),this.$store.commit("INSERT_ORDER",{symbol:n.instrument_id,exchange_id:n.exchange_id,ins_id:n.ins_id,direction:i,offset:"OPEN",limitPrice:n.last_price,volume:s})},rowClick:function(t,e,i){var n=t.exchange_id+"."+t.instrument_id;this.$store.commit("SET_SELECTED_SYMBOL",n)}}},Ut=qt,Wt=Object(c["a"])(Ut,Rt,Mt,!1,null,null,null);Wt.options.__file="TablePositions.vue";var $t=Wt.exports,Bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Table",{attrs:{height:t.height,columns:t.columns,data:t.orders}})},Ft=[],Ht={data:function(){var t=this;return{columns:[{title:"委托单ID",key:"order_id",width:180,fixed:"left"},{title:"合约代码",key:"instrument_id",width:70,align:"center"},{title:"方向",key:"direction",width:50,align:"center",render:function(t,e){return t("div",N(e.row.direction))}},{title:"开平",key:"offset",width:50,align:"center",render:function(t,e){return t("div",L(e.row.offset))}},{title:"手数",key:"volume_orign",width:50,align:"right"},{title:"价格",key:"limit_price",width:70,align:"right"},{title:"未成交",key:"volume_left",width:60,align:"right"},{title:"操作",key:"action",width:80,align:"center",render:function(e,i){var n=e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handleCancelOrder(i.index,i.row)}}},"撤单");return"ALIVE"===i.row.status?e("div",[n]):e("div",[])}},{title:"状态",key:"status",width:100,align:"center",render:function(t,e){return"FINISHED"===e.row.status?t("div","已完成"):t("div","未完成")}},{title:"下单时间",key:"insert_date_time",width:160,align:"right",render:function(t,e){return t("div",I(e.row.insert_date_time))}},{title:"提示",key:"last_msg",width:180,align:"right"}]}},props:{height:{type:String}},mounted:function(){},computed:Object(m["a"])({},Object(f["b"])({orders:"orders/GET_ORDERS"})),methods:{filterStatus:function(t,e){return e.status===t},handleCancelOrder:function(t,e){this.$store.commit("CANCEL_ORDER",{order_id:e.order_id})},rowClick:function(t,e,i){var n=t.exchange_id+"."+t.instrument_id;this.$store.commit("SET_SELECTED_SYMBOL",n)}}},Gt=Ht,zt=Object(c["a"])(Gt,Bt,Ft,!1,null,null,null);zt.options.__file="TableOrders.vue";var Qt=zt.exports,Yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Table",{attrs:{height:t.height,columns:t.columns,data:t.trades}})},Kt=[],Zt={data:function(){return{columns:[{title:"委托单ID",key:"order_id",width:180,fixed:"left"},{title:"交易所单号",key:"exchange_trade_id",width:100,align:"left"},{title:"合约代码",key:"instrument_id",width:100,align:"left"},{title:"方向",key:"direction",width:50,align:"center",render:function(t,e){return t("div",N(e.row.direction))}},{title:"开平",key:"offset",width:50,align:"center",render:function(t,e){return t("div",L(e.row.offset))}},{title:"手数",key:"volume",width:50,align:"right"},{title:"价格",key:"price",width:70,align:"right",render:function(t,e){return t("div",j(e.row.price))}},{title:"时间",key:"trade_date_time",width:160,align:"right",render:function(t,e){return t("div",I(e.row.trade_date_time))}},{title:"手续费",key:"commission",width:80,align:"right"}]}},props:{height:{type:String}},mounted:function(){},computed:Object(m["a"])({},Object(f["b"])({trades:"trades/GET_TRADES",filtersObj:"trades/GET_TRADES_DISTINCT_INSID"})),methods:{filterInstrumentId:function(t,e){return e.instrument_id===t}}},Xt=Zt,Jt=Object(c["a"])(Xt,Yt,Kt,!1,null,null,null);Jt.options.__file="TableTrades.vue";var Vt=Jt.exports,te={components:{TableAccounts:At,TablePositions:$t,TableOrders:Qt,TableTrades:Vt,SplitLeftRight:ft},data:function(){return{split:.3,searchResult:[],selectedTab:"accounts",volume:1,priceTick:1,limitPrice:0,priceDecs:0,maxPrice:1/0,minPrice:0}},mounted:function(){var t=this;this.$store.subscribe(function(e,i){if("SET_SELECTED_SYMBOL"===e.type){var n=t.$store.getters["quotes/GET_QUOTE"](e.payload);n&&(t.priceTick=Number(n.price_tick),t.limitPrice=Number(n.last_price),t.priceDecs=Number(n.price_decs),t.maxPrice=0===n.upper_limit?1/0:Number(n.upper_limit),t.minPrice=0===n.lower_limit?0:Number(n.lower_limit))}})},computed:Object(m["a"])({height:function(){return this.$root.windowHeight*(1-this.$root.appSplit)-44+""},instrumentId:{get:function(){return this.innerInstrumentId},set:function(t){this.$store.commit("SET_SELECTED_SYMBOL",t)}}},Object(f["b"])({innerInstrumentId:"getSelectedInstrumentId"})),methods:{querySearch:function(t,e){var i=t?this.$store.getters["quotes/GET_QUOTES_BY_INPUT"](t):[];this.searchResult=i},handleSelectInstrument:function(t){},insertOrder:function(t,e){var i=this.$store.getters["quotes/GET_QUOTE"](this.instrumentId);this.$store.commit("INSERT_ORDER",{symbol:i.instrument_id,exchange_id:i.exchange_id,ins_id:i.ins_id,direction:t,offset:e,limitPrice:this.limitPrice,volume:this.volume})}}},ee=te,ie=(i("e86d"),Object(c["a"])(ee,Dt,xt,!1,null,null,null));ie.options.__file="UserTrade.vue";var ne=ie.exports,se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-login"},[t.showLoginError?i("Alert",{attrs:{type:"error","show-icon":"",closable:""}},[t._v("\n        等待回应超时,可能的原因 (1)服务器正在运维，(2)网络不通，无法连接服务器，请稍后/检查网络后重试。\n    ")]):t._e(),i("Form",{ref:"userForm",attrs:{model:t.userForm,rules:t.rules,"label-width":80}},[i("FormItem",{attrs:{label:"期货公司",prop:"bid"}},[i("Select",{model:{value:t.userForm.bid,callback:function(e){t.$set(t.userForm,"bid",e)},expression:"userForm.bid"}},t._l(t.brokers,function(e){return i("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))],1),i("FormItem",{attrs:{label:"账号",prop:"user_name"}},[i("Input",{attrs:{placeholder:"请输入账号"},model:{value:t.userForm.user_name,callback:function(e){t.$set(t.userForm,"user_name",e)},expression:"userForm.user_name"}})],1),i("FormItem",{attrs:{label:"密码",prop:"password"}},[i("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.userForm.password,callback:function(e){t.$set(t.userForm,"password",e)},expression:"userForm.password"}})],1),i("FormItem",[i("Button",{attrs:{loading:t.loading,type:"primary"},on:{click:function(e){t.onSubmit("userForm")}}},[t._v("\n                登录\n            ")])],1)],1)],1)},re=[],ae=(i("f751"),{name:"userLogin",data:function(){return{userForm:Object.assign({bid:"",user_name:"",password:""},tt),rules:{bid:[{required:!0,message:"请选择期货公司",trigger:"blur"}],user_name:[{required:!0,message:"请输入账户",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},loading:!1,showLoginError:!1}},computed:Object(m["a"])({},Object(f["b"])({brokers:"getBrokers"})),methods:{onSubmit:function(t){var e=this;this.loading=!0,this.$refs[t].validate(function(t){t&&(e.$store.commit("LOGIN",{bid:e.userForm.bid,user_name:e.userForm.user_name,password:e.userForm.password}),setTimeout(function(){0===this.$store.state.trading_day.length&&(this.loading=!1,this.showLoginError=!0)}.bind(e),1e4))})}}}),oe=ae,ce=(i("55b5"),Object(c["a"])(oe,se,re,!1,null,null,null));ce.options.__file="UserLogin.vue";var le=ce.exports,he=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{title:"确认结算单",closable:!1,"mask-closable":!1},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("div",{staticClass:"confirm-container"},[i("pre",[t._v(t._s(t.confirmContent))])]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:t.clickOk}},[t._v("确定")])],1)])},ue=[],de={props:{},computed:{visible:function(){return"doing"===this.$store.state.confirm},confirmContent:function(){return this.$store.state.confirmContent}},methods:{clickOk:function(){this.$store.commit("CONFIRM_SETTLEMENT")}}},_e=de,me=(i("d860"),Object(c["a"])(_e,he,ue,!1,null,"8486de14",null));me.options.__file="UserConfirmSettlement.vue";var fe=me.exports,pe={name:"user",data:function(){return{}},components:{Trade:ne,Login:le,Confirm:fe},computed:{tradingDay:function(){return this.$store.state.trading_day}}},ge=pe,be=Object(c["a"])(ge,Ot,Ct,!1,null,null,null);be.options.__file="User.vue";var ve=be.exports,ye=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"charts-container"},[i("Chart",{attrs:{instrumentId:t.instrumentId,height:t.height}})],1)},we=[],ke=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chart",style:{height:t.height+"px"}},[i("RadioGroup",{attrs:{size:"small",type:"button"},model:{value:t.selectedPeriod,callback:function(e){t.selectedPeriod=e},expression:"selectedPeriod"}},t._l(t.periods,function(e){return i("Radio",{key:e,attrs:{label:e}},[t._v("\n            "+t._s(e)+"\n        ")])})),t._v("\n     \n    "),i("Checkbox",{attrs:{label:"ma"},on:{"on-change":function(e){t.onchange("ma3")}},model:{value:t.indicators.ma3.show,callback:function(e){t.$set(t.indicators.ma3,"show",e)},expression:"indicators.ma3.show"}},[t._v("MA3")]),i("Checkbox",{attrs:{label:"ma"},on:{"on-change":function(e){t.onchange("ma10")}},model:{value:t.indicators.ma10.show,callback:function(e){t.$set(t.indicators.ma10,"show",e)},expression:"indicators.ma10.show"}},[t._v("MA10")]),i("Checkbox",{attrs:{label:"ma"},on:{"on-change":function(e){t.onchange("ma30")}},model:{value:t.indicators.ma30.show,callback:function(e){t.$set(t.indicators.ma30,"show",e)},expression:"indicators.ma30.show"}},[t._v("MA30")]),i("Checkbox",{attrs:{label:"boll"},on:{"on-change":function(e){t.onchange("boll")}},model:{value:t.indicators.boll.show,callback:function(e){t.$set(t.indicators.boll,"show",e)},expression:"indicators.boll.show"}},[t._v("BOLL")]),i("div",{ref:"CHART",style:{height:t.height-30+"px"},attrs:{id:"CHART"}})],1)},Ee=[],Te=i("5698"),Se=(i("673e"),i("7f7f"),i("ade3")),Oe=i("257e"),Ce=function(t){function e(t){var i;return Object(F["a"])(this,e),i=Object(G["a"])(this,Object(z["a"])(e).call(this)),i.dm=t.dm,i.ws=t.ws,i._symbol=t.symbol?t.symbol:null,i._duration=t.duration?t.duration:null,i._width=t.width?t.width:null,i._barWidth=t.barWidth?Math.round(t.barWidth):21,i._barNumbers=Math.floor(i._width/i._barWidth),i._left_id=-1,i._right_id=-1,i.klinesPath&&(i.dm.subscribe(i.klinesPath,i.update.bind(Object(Oe["a"])(Object(Oe["a"])(i)))),i.sendToServer()),i}return Object(Q["a"])(e,t),Object(H["a"])(e,[{key:"update",value:function(){this.klines&&this.klines.last_id&&this.klines.last_id>-1&&(-1===this._left_id||-1===this._right_id?this.chart_right_id&&this.chart_right_id>-1&&(this._right_id=this.chart_right_id,this._left_id=this._right_id-this._barNumbers+1,this.fire("update")):(this._right_id>=this.klines.last_id-1&&(this._right_id=this._right_id+1===this.klines.last_id?this._right_id+1:this._right_id,this._left_id=this._right_id-this._barNumbers+1),this.fire("update")))}},{key:"moves",value:function(t){if(-1!==this._left_id){var e=this._left_id-t,i=e+this._barNumbers-1,n=this.klines.last_id;if(e>=0&&e<=n){var s=[e,i];return this._left_id=s[0],this._right_id=s[1],this.sendToServer(),!0}return!1}}},{key:"sendToServer",value:function(){this.symbol&&this.duration&&(this._right_id>-1&&this._right_id!==this.last_id?this.ws.send({aid:"set_chart",chart_id:e.CHART_ID,ins_list:this.symbol,duration:this.duration,view_width:2*this._barNumbers,left_kline_id:this._left_id-this._barNumbers}):this.ws.send({aid:"set_chart",chart_id:e.CHART_ID,ins_list:this.symbol,duration:this.duration,view_width:2*this._barNumbers}))}},{key:"width",set:function(t){this._width=t,this._barNumbers=Math.floor(this._width/this._barWidth);var e=this._right_id-this._barNumbers+1;this._left_id=e<0?0:e,this._right_id=this._left_id+this._barNumbers-1}},{key:"barWidth",get:function(){return this._barWidth},set:function(t){if(t=t%2===0?t+1:t,t>=e.BAR_WIDTH_MIN&&t<=e.BAR_WIDTH_MAX){this._barWidth=t,this._barNumbers=Math.floor(this._width/this._barWidth);var i=this._right_id-this._barNumbers+1;this._left_id=i<0?0:i,this._right_id=this._left_id+this._barNumbers-1,this.sendToServer()}}},{key:"barNumbers",get:function(){return this._barNumbers}},{key:"barPadding",get:function(){return this._barWidth>30?8:this._barWidth>=16?4:1}},{key:"symbol",get:function(){return this._symbol},set:function(t){this._symbol!==t&&(this.klinesPath&&this.dm.unsubscribe(this.klinesPath,this.update),this._symbol=t,this._left_id=this._right_id=-1,this.klinesPath&&this.dm.subscribe(this.klinesPath,this.update.bind(this)),this.sendToServer())}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration!==t&&(this.klinesPath&&this.dm.unsubscribe(this.klinesPath,this.update),this._duration=t,this._left_id=this._right_id=-1,this.klinesPath&&this.dm.subscribe(this.klinesPath,this.update.bind(this)),this.sendToServer())}},{key:"klinesPath",get:function(){return this.symbol&&this.duration?"klines/"+this.symbol+"/"+this.duration:""}},{key:"ticksPath",get:function(){return this.symbol&&0===this.duration?"ticks/"+this.symbol:""}},{key:"quote",get:function(){return this.symbol?this.dm.getByPath("quotes/"+this.symbol):null}},{key:"chart",get:function(){return this.dm.getByPath("charts/"+e.CHART_ID)}},{key:"klines",get:function(){var t=this.klinesPath?this.dm.getByPath(this.klinesPath):null;if(t&&t.data&&!t.proxy){t.proxy={};var i=["open","close","high","low","volume","close_oi","open_oi","datetime"];i.forEach(function(i){return t.proxy[i]=e.MakeArrayProxy(t.data,t,function(t){return t?t[i]:NaN})})}return t}},{key:"ticks",get:function(){return this.ticksPath?this.dm.getByPath(this.ticksPath):null}},{key:"left_id",get:function(){return this._left_id}},{key:"right_id",get:function(){return this._right_id}},{key:"chart_left_id",get:function(){return this.chart&&this.chart.state&&this.chart.state.duration===this._duration&&this.chart.state.ins_list===this._symbol&&this.chart.left_id?this.chart.left_id:-1}},{key:"chart_right_id",get:function(){return this.chart&&this.chart.state&&this.chart.state.duration===this._duration&&this.chart.state.ins_list===this._symbol&&this.chart.right_id?this.chart.right_id:-1}},{key:"chart_last_id",get:function(){return this.klines&&this.klines.last_id?this.klines.last_id:-1}}],[{key:"MakeArrayProxy",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n={get:function(t,n,s){if(isNaN(n))return"last_id"===n||"left_id"===n?e[n]:t[n];var r=Number(n);return r<0?NaN:i?i(t[r]):t[r]}};return new Proxy(t,n)}}]),e}(Y["a"]);Object(Se["a"])(Ce,"CHART_ID","web_kline_chart"),Object(Se["a"])(Ce,"BAR_WIDTH_MAX",59),Object(Se["a"])(Ce,"BAR_WIDTH_MIN",3);var De=i("1341"),xe=function(){return{up:function(t){return t.open<t.close},down:function(t){return t.open>t.close},equal:function(t){return t.open===t.close}}},Pe=xe(),je=function(){function t(e){Object(F["a"])(this,t),this.name=e.name?e.name:(new Date).getTime(),this.plot=e.plot?e.plot:null,this.chartDm=this.plot.chartDm,this.types=["line","body"]}return Object(H["a"])(t,[{key:"createPaths",value:function(){var t=this;return this.paths=[],Object.keys(Pe).forEach(function(e){return t.paths.push([t.name,"line",e].join("."))}),Object.keys(Pe).forEach(function(e){return t.paths.push([t.name,"body",e].join("."))}),this.paths}},{key:"calcPaths",value:function(t,e,i){var n=this;if(this.plot.yScale&&this.plot.xScale&&this.chartDm){var s={};this.paths.forEach(function(t){return s[t]=""});for(var r=function(t){if(!i[t])return"continue";Object.keys(Pe).forEach(function(e){Pe[e](i[t])&&(s[[n.name,"body",e].join(".")]+=n.bodyPath(i[t],t),s[[n.name,"line",e].join(".")]+=n.linePath(i[t],t))})},a=t;a<=e;a++)r(a);return s}}},{key:"bodyPath",value:function(t,e){var i=Math.round(this.plot.yScale(t.open)),n=Math.round(this.plot.yScale(t.close)),s=Math.round(this.plot.xScale(e)+this.chartDm.barPadding),r=this.chartDm.barWidth-2*this.chartDm.barPadding,a="";return a=t.open!==t.close?"M ".concat(s," ").concat(i," L ").concat(s+r," ").concat(i," L ").concat(s+r," ").concat(n," L ").concat(s," ").concat(n," L ").concat(s," ").concat(i):"M ".concat(s," ").concat(i+.5," L ").concat(s+r," ").concat(i+.5),a}},{key:"linePath",value:function(t,e){var i=Math.round(this.plot.yScale(t.high)),n=Math.round(this.plot.yScale(t.low)),s=Math.round(this.plot.xScale(e))+this.chartDm.barWidth/2,r="M ".concat(s," ").concat(i," L ").concat(s," ").concat(n);return r}}]),t}(),Ie=je,Ne=function(){return{up:function(t){return t.open<=t.close},down:function(t){return t.open>t.close}}},Le=Ne(),Ae=function(){function t(e){Object(F["a"])(this,t),this.name=e.name?e.name:(new Date).getTime(),this.plot=e.plot?e.plot:null,this.chartDm=this.plot.chartDm}return Object(H["a"])(t,[{key:"createPaths",value:function(){var t=this;return this.paths=[],Object.keys(Le).forEach(function(e){return t.paths.push([t.name,"body",e].join("."))}),this.paths}},{key:"calcPaths",value:function(t,e,i){var n=this;if(this.plot.yScale&&this.plot.xScale&&this.chartDm){var s={};this.paths.forEach(function(t){return s[t]=""});for(var r=function(t){if(!i[t])return"continue";Object.keys(Le).forEach(function(e){Le[e](i[t])&&(s[[n.name,"body",e].join(".")]+=n.bodyPath(i[t],t,"up"===e?0:.5))})},a=t;a<=e;a++)r(a);return s}}},{key:"bodyPath",value:function(t,e,i){var n=Math.floor(this.plot.yScale(0)),s=Math.round(n-this.plot.yScale(t.volume)),r=Math.round(this.plot.xScale(e)+this.chartDm.barPadding),a=this.chartDm.barWidth-2*this.chartDm.barPadding,o="M ".concat(r+i," ").concat(n," L ").concat(r+a-i," ").concat(n," L ").concat(r+a-i," ").concat(n-s," L ").concat(r+i," ").concat(n-s," L ").concat(r+i," ").concat(n);return o}}]),t}(),Re=Ae,Me=function(){function t(e){Object(F["a"])(this,t),this.name=e.name?e.name:(new Date).getTime(),this.plot=e.plot?e.plot:null,this.chartDm=this.plot.chartDm}return Object(H["a"])(t,[{key:"createPaths",value:function(){return this.paths=["oi"],this.paths}},{key:"calcPaths",value:function(t,e,i){if(this.plot.yScale&&this.plot.xScale&&this.chartDm){for(var n="",s=t;s<=e;s++)if(i[s]){var r=this.plot.yScale(i[s].close_oi),a=Math.round(this.plot.xScale(s)+this.chartDm.barWidth/2);n+=""===n?"M":"L",n+="".concat(a," ").concat(r," ")}return{oi:n}}}}]),t}(),qe=Me,Ue={up:function(t){return t.open<=t.close},down:function(t){return t.open>t.close}},We={up:function(t){return t.open<t.close},down:function(t){return t.open>t.close},equal:function(t){return t.open===t.close}},$e=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(F["a"])(this,t),this.calculator=e.calculator,this.name=e.name?e.name:(new Date).getTime(),this.plot=e.plot?e.plot:null,this.chartDm=this.plot.chartDm,this.pathClasses=[],this.type="MAIN"}return Object(H["a"])(t,[{key:"createPaths",value:function(){for(var t=this,e=function(e){var i=t.calculator.paths[e].name,n=t.calculator.paths[e].type;"colorBar"===n?Object.keys(Ue).forEach(function(e){t.pathClasses.push([t.name,i,e].join("."))}):"candle"===n?["line","body"].forEach(function(e){Object.keys(We).forEach(function(n){t.pathClasses.push([t.name,i,e,n].join("."))})}):t.pathClasses.push([t.name,i].join("."))},i=0;i<this.calculator.paths.length;i++)e(i);return this.pathClasses}},{key:"calcPaths",value:function(e,i,n){var s=this;if(this.plot.yScale&&this.plot.xScale&&this.chartDm){var r={};this.pathClasses.forEach(function(t){return r[t]=""});for(var a=function(n){var a=s.calculator.paths[n].name,o=s.name+"."+s.calculator.paths[n].name,c=s.calculator.paths[n].type;if("line"===c){for(var l=e;l<=i;l++)if(s.calculator[a][l]){var h=s.linePath(s.calculator[a][l],l);r[o]+=""===r[o]?"M ".concat(h):"L ".concat(h)}}else if("bar"===c){for(var u=s.plot.yScale(0),d=e;d<=i;d++)if(s.calculator[a][d]){var _=s.linePath(s.calculator[a][d],u,d);r[o]+=_}}else"colorBar"===c&&function(){for(var n=s.plot.yScale(0),c=function(e){if(!s.calculator[a][e])return"continue";Object.keys(Ue).forEach(function(i){if(i(s.chartDm.klines.data[e])){var c=s.linePath(s.calculator[a][e],n,e,"down"===i?t.HollowBarDiff:0);r[o+"."+i]+=c}})},l=e;l<=i;l++)c(l)}()},o=0;o<this.calculator.paths.length;o++)a(o);return r}}},{key:"linePath",value:function(t,e){var i=this.plot.yScale(t),n=this.plot.xScale(e)+this.chartDm.barWidth/2;return"".concat(n," ").concat(i)}},{key:"barPath",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=Math.round(e-this.plot.yScale(t)),r=Math.round(this.plot.xScale(i)+this.chartDm.barPadding),a=this.chartDm.barWidth-2*this.chartDm.barPadding;return"M ".concat(r+n," ").concat(e," L ").concat(r+a-n," ").concat(e," L ").concat(r+a-n," ").concat(e-s," L ").concat(r+n," ").concat(e-s," L ").concat(r+n," ").concat(e)}}]),t}();Object(Se["a"])($e,"HollowBarDiff",.5);var Be=$e,Fe=function(){function t(e){Object(F["a"])(this,t),this.parentG=e.parentG,this.name=e.name,this.g=this.parentG.append("g").attr("class",this.name),this._top=e.top?e.top:0,this._left=e.left?e.left:0,this._height=e.height?e.height:0,this._width=e.width?e.width:0,this.g.attr("transform","translate("+this._left+","+this._top+")").attr("height",this._height).attr("height",this._width)}return Object(H["a"])(t,[{key:"top",get:function(){return this._top},set:function(t){this._top=t,this.g.attr("transform","translate("+this._left+","+this._top+")")}},{key:"left",get:function(){return this._left},set:function(t){this._left=t,this.g.attr("transform","translate("+this._left+","+this._top+")")}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this.g.attr("height",this._height)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t,this.g.attr("width",this._width)}}]),t}(),He=function(t){function e(t){var i;return Object(F["a"])(this,e),i=Object(G["a"])(this,Object(z["a"])(e).call(this,t)),i.type=t.type,i.xScale=t.xScale,i.chartDm=t.chartDm,i.yScale=Te["g"]().range([t.height,0]),i.yAxis="right"===t.yAxisPos?Te["c"]().scale(i.yScale):i.yAxis=Te["b"]().scale(i.yScale),i.g.append("g").attr("class","y axis "+("right"===t.yAxisPos?"right":"")),"right"===t.yAxisPos&&i.g.select("g.y.axis.right").attr("transform","translate("+t.width+",0)"),i.init(),i}return Object(Q["a"])(e,t),Object(H["a"])(e,[{key:"init",value:function(){var t=this;switch(this.type){case"candle":this.path=new Ie({name:this.name,plot:this});break;case"volume":this.path=new Re({name:this.name,plot:this});break;case"oi":this.path=new qe({name:this.name,plot:this});break}this.path&&this.path.createPaths().forEach(function(e){t.appendPlotTypePath(e.split("."))}),this.indicators={}}},{key:"addIndicator",value:function(t){var e=this;switch(t.name){case"ma":this.indicators[t.id]=new Be({calculator:t.calculator,name:t.id,plot:this});break;case"boll":this.indicators[t.id]=new Be({calculator:t.calculator,name:t.id,plot:this});break}this.indicators[t.id]&&this.indicators[t.id].createPaths().forEach(function(i){i=t.id+"."+i,e.appendPlotTypePath(i.split("."))})}},{key:"appendPathsGroupBy",value:function(t){var e=this;Object.keys(t).forEach(function(t){e.appendPlotTypePath([e.name,t])})}},{key:"appendPlotTypePath",value:function(t){this.g.selectAll("path.".concat(e.ArrayJoin(t,"."))).data(function(t){return[t]}).enter().append("path").attr("class","".concat(e.ArrayJoin(t," ")))}},{key:"getYPriceRange",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=1/0,s=-1/0;if(i){for(var r=0,a=t;a<=e;a++){var o=this.chartDm.klines.data[a];r=Math.max(Math.abs(o.high-i),Math.abs(o.low-i),r)}n=i-r,s=i+r}else{for(var c=t;c<=e;c++){var l=this.chartDm.klines.data[c];l&&(n=Math.min(n,l.low),s=Math.max(s,l.high))}if(this.chartDm.quote&&this.chartDm.quote.price_tick){var h=20*this.chartDm.quote.price_tick;n-=h,s+=h}}return[n,s]}},{key:"getYMaxRange",value:function(t,e,i){for(var n=-1/0,s=t;s<=e;s++){var r=this.chartDm.klines.data[s];r&&(n=Math.max(n,r[i]))}return n}},{key:"getYMinRange",value:function(t,e,i){for(var n=1/0,s=t;s<=e;s++){var r=this.chartDm.klines.data[s];r&&(n=Math.min(n,r[i]))}return n}},{key:"draw",value:function(){var t=null;switch(this.type){case"candle":t=this.getYPriceRange(this.chartDm.left_id,this.chartDm.right_id);break;case"volume":t=[0,this.getYMaxRange(this.chartDm.left_id,this.chartDm.right_id,"volume")];break;case"oi":t=[this.getYMinRange(this.chartDm.left_id,this.chartDm.right_id,"close_oi"),this.getYMaxRange(this.chartDm.left_id,this.chartDm.right_id,"close_oi")];break}this.yScale.domain(t),this.g.selectAll("g.y.axis").call(this.yAxis);var e=this.path.calcPaths(this.chartDm.left_id,this.chartDm.right_id,this.chartDm.klines.data);for(var i in e)this.g.select("path.".concat(i)).attr("d",e[i]);for(var n in this.indicators)this.indicators[n].calculator.calc(this.chartDm.left_id,this.chartDm.right_id,this.chartDm.klines);for(var s in this.indicators){var r=this.indicators[s].calcPaths(this.chartDm.left_id,this.chartDm.right_id,this.chartDm.klines.data);for(var a in r)this.g.select("path.".concat(s,".").concat(a)).attr("d",r[a])}}},{key:"showIndicator",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.indicators)i===t&&this.g.selectAll("path.".concat(i)).attr("visibility",e?"visible":"hidden")}},{key:"height",set:function(t){Object(De["a"])(Object(z["a"])(e.prototype),"height",t,this,!0),this.yScale.range([t,0])}},{key:"width",set:function(t){Object(De["a"])(Object(z["a"])(e.prototype),"width",t,this,!0),this.g.select("g.y.axis.right").attr("transform","translate("+t+",0)")}}],[{key:"ArrayJoin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return t.length?t.join(e):""}},{key:"UpDownEqual",value:function(){return{up:function(t){return t.open<t.close},down:function(t){return t.open>t.close},equal:function(t){return t.open===t.close}}}}]),e}(Fe),Ge=He,ze=function(t){function e(t){var i;return Object(F["a"])(this,e),i=Object(G["a"])(this,Object(z["a"])(e).call(this,t)),i._text="正在加载数据",i._isShow=!!t.show&&t.show,i.textG=i.g.append("text").attr("x","50%").attr("y","50%").attr("text-anchor","middle").attr("font-size",50).text(i._text).attr("visibility",i._isShow?"visible":"hidden"),i}return Object(Q["a"])(e,t),Object(H["a"])(e,[{key:"show",get:function(){return this._isShow},set:function(t){this._isShow=t,this.textG.attr("visibility",this._isShow?"visible":"hidden")}},{key:"text",get:function(){return this._text},set:function(t){this._text=t,this.textG.text(String(t))}}]),e}(Fe),Qe=i("3835"),Ye=i("45eb"),Ke=function(t){function e(t){var i;Object(F["a"])(this,e),i=Object(G["a"])(this,Object(z["a"])(e).call(this,t)),i.chartDm=t.chartDm;var n=Object(Oe["a"])(Object(Oe["a"])(i));return i.g.selectAll("rect").data([0]).enter().append("rect").attr("width",Object(Ye["a"])(Object(z["a"])(e.prototype),"width",Object(Oe["a"])(i))).attr("height",Object(Ye["a"])(Object(z["a"])(e.prototype),"height",Object(Oe["a"])(i))).attr("fill-opacity",0).on("mouseover",function(){n.show()}).on("mousemove",function(){var t=Te["f"](this),e=Object(Qe["a"])(t,2),i=e[0],s=e[1],r=Math.floor(i/n.chartDm.barWidth),a=r*n.chartDm.barWidth+n.chartDm.barWidth/2;if(n.chartDm.klines&&n.chartDm.klines.data){var o=n.chartDm.klines.data[n.chartDm.left_id+r];o||(o={high:"",open:"",low:"",close:""});var c="高 ".concat(o.high," 开 ").concat(o.open," 低 ").concat(o.low," 收 ").concat(o.close);n.g.select("g.text text").text(c)}var l=n.g.select("g.crosshair.horizontal line"),h=n.g.select("g.crosshair.vertical line");l.attr("y1")!==s&&l.attr("y1",s).attr("y2",s),h.attr("x1")!==a&&h.attr("x1",a).attr("x2",a)}).on("mouseleave",function(){n.hide()}),i.g.append("g").attr("class","crosshair horizontal").append("line").attr("x1",0).attr("y1",0).attr("x2",Object(Ye["a"])(Object(z["a"])(e.prototype),"width",Object(Oe["a"])(i))).attr("y2",0).attr("stroke","#bbbbbb").attr("stroke-dasharray","2 4").attr("visibility","hidden"),i.g.append("g").attr("class","crosshair vertical").append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",Object(Ye["a"])(Object(z["a"])(e.prototype),"height",Object(Oe["a"])(i))).attr("stroke","#bbbbbb").attr("stroke-dasharray","2 4").attr("visibility","hidden"),i.g.append("g").attr("class","text").append("text").attr("fill","grey").attr("x",0).attr("y",0),i.g.append("g").attr("class","axisannotation x"),i.g.append("g").attr("class","axisannotation y"),i}return Object(Q["a"])(e,t),Object(H["a"])(e,[{key:"show",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.g.selectAll("g.crosshair line").attr("visibility",t?"visible":"hidden")}},{key:"hide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.g.selectAll("g.crosshair line").attr("visibility",t?"visible":"hidden")}},{key:"height",set:function(t){Object(De["a"])(Object(z["a"])(e.prototype),"height",t,this,!0),this.g.select("g.crosshair.vertical line").attr("y2",t),this.g.select("rect").attr("height",t)}},{key:"width",set:function(t){Object(De["a"])(Object(z["a"])(e.prototype),"width",t,this,!0),this.g.select("g.crosshair.horizontal line").attr("x2",t),this.g.select("rect").attr("width",t)}}]),e}(Fe);function Ze(t,e,i){for(var n=0,s=i-e+1;s<=i&&!isNaN(n);s++)n+=t[s];return n}function Xe(t,e,i,n){return 0!=n.length&&n[t-1]?n[t-1]-e[t-i]/i+e[t]/i:Ze(e,i,t)/i}function Je(t,e,i,n){n._s=n._s?n._s:[];var s=0,r=0;if(n._s[t-1])r=n._s[t-1][0]-e[t-i]+e[t],s=n._s[t-1][1]-e[t-i]*e[t-i]+e[t]*e[t];else for(var a=t-i+1;a<=t;a++){var o=e[a];s+=o*o,r+=o}var c=s-r*r/i;c<0&&c>-1e-6&&(c=Math.abs(c));var l=1==i?1:i-1,h=Math.sqrt(c/l);return isNaN(h)||(n._s[t]=[r,s]),h}var Ve=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(F["a"])(this,t),this.params=e.params?e.params:5,this.paths=[{name:"ma",classes:".ma",type:"line"}],this.ma=[]}return Object(H["a"])(t,[{key:"calc",value:function(t,e,i){for(var n=t;n<=e;n++)this.ma[n]||(this.ma[n]=Xe(n,i.proxy.close,this.params,this.ma));return this.ma}},{key:"range",value:function(t,e){for(var i=NaN,n=NaN,s=t;s<=e;s++)this.ma[s]&&(n=n?Math.max(n,this.ma[s]):this.ma[s],i=i?Math.min(i,this.ma[s]):this.ma[s]);return[i,n]}}]),t}(),ti=Ve,ei=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(F["a"])(this,t),this.n=e.pramas&&e.pramas.n?e.pramas.n:3,this.p=e.pramas&&e.pramas.p?e.pramas.p:5,this.paths=[{name:"top",classes:".boll.top",type:"line"},{name:"bottom",classes:".boll.bottom",type:"line"}],this._mid=[],this._std=[],this.top=[],this.bottom=[]}return Object(H["a"])(t,[{key:"calc",value:function(t,e,i){for(var n=t;n<=e;n++)this.top[n]&&this.bottom[n]||(this._mid[n]=Xe(n,i.proxy.close,this.n,this._mid),this._std[n]=Je(n,i.proxy.close,this.n,this._std),this.top[n]=this._mid[n]+this.p*this._std[n],this.bottom[n]=this._mid[n]-this.p*this._std[n]);return{top:this.top,bottom:this.bottom}}},{key:"range",value:function(t,e){for(var i=NaN,n=NaN,s=t;s<=e;s++)this.top[s]&&this.bottom[s]&&(n=n?Math.max(n,this.top[s]):this.top[s],i=i?Math.min(i,this.bottom[s]):this.bottom[s]);return[i,n]}}]),t}(),ii=ei,ni=Te["j"](".%L"),si=Te["j"](":%S"),ri=Te["j"]("%H:%M"),ai=Te["j"]("%H:%M"),oi=Te["j"]("%m%d"),ci=Te["j"]("%m%d"),li=Te["j"]("%y");function hi(t){return(Te["n"](t)<t?ni:Te["l"](t)<t?si:Te["k"](t)<t?ri:Te["i"](t)<t?ai:Te["m"](t)<t?oi:Te["o"](t)<t?ci:li)(t)}var ui=function(){function t(e,i,n){Object(F["a"])(this,t),this._height=i,this._width=n,this._plotsNumber=e||2,this.positions=[],this.initLayout()}return Object(H["a"])(t,[{key:"initLayout",value:function(){var e=1/this.plotsNumber,i=e+.3*e*(this.plotsNumber-1),n=.7*e,s=this.height-t.PLOT_PADDING*(this.plotsNumber-1);this.positions[0]={width:this._width,height:s*i,top:0};for(var r=1;r<this.plotsNumber;r++)this.positions[r]={width:this._width,height:s*n,top:this.positions[r-1].top+this.positions[r-1].height+t.PLOT_PADDING}}},{key:"width",set:function(t){this._width=t,this.initLayout()},get:function(){return this._width}},{key:"height",set:function(t){this._height=t,this.initLayout()},get:function(){return this._height}},{key:"plotsNumber",set:function(t){this._plotsNumber=t,this.initLayout()},get:function(){return this._plotsNumber}}]),t}();Object(Se["a"])(ui,"PLOT_PADDING",2);var di=function(){function t(e){Object(F["a"])(this,t),this.divDomId=e.id,this.outerWidth=e.width,this.outerHeight=e.height,this.margin=e.margin?e.margin:{top:10,right:50,bottom:30,left:50},this.innerWidth=this.outerWidth-this.margin.left-this.margin.right,this.innerHeight=this.outerHeight-this.margin.top-this.margin.bottom,this.chartDm=new Ce({dm:e.dm,ws:e.ws,symbol:e.instrumentId,duration:e.duration,width:this.innerWidth}),this.chartDm.addEventListener("update",this.draw.bind(this)),this.indicators={},this.init(),this.plotsManager=new ui(2,this.innerHeight,this.innerWidth),this.mainPlot=new Ge({name:"candle",type:"candle",xScale:this.xScale,chartDm:this.chartDm,parentG:this.rootG,width:this.innerWidth,height:this.plotsManager.positions[0].height,top:this.plotsManager.positions[0].top,left:0}),this.subPlots={volume:new Ge({name:"volume",type:"volume",xScale:this.xScale,chartDm:this.chartDm,parentG:this.rootG,width:this.innerWidth,height:this.plotsManager.positions[1].height,top:this.plotsManager.positions[1].top,left:0}),oi:new Ge({name:"oi",type:"oi",xScale:this.xScale,chartDm:this.chartDm,parentG:this.rootG,yAxisPos:"right",width:this.innerWidth,height:this.plotsManager.positions[1].height,top:this.plotsManager.positions[1].top,left:0})}}return Object(H["a"])(t,[{key:"init",value:function(){this.svg=Te["h"]("#"+this.divDomId).append("svg").attr("width",this.outerWidth).attr("height",this.outerHeight),this.rootG=this.svg.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.loading=new ze({parentG:this.svg,width:this.outerWidth,height:this.outerHeight,show:!0}),this.xScale=Te["g"]().range([0,this.chartDm.barNumbers*this.chartDm.barWidth-this.chartDm.barWidth]),this.xAxis=Te["a"]().scale(this.xScale),this.rootG.append("g").attr("class","x axis").attr("transform","translate("+this.chartDm.barWidth/2+","+this.innerHeight+")"),this.crosshair=new Ke({parentG:this.svg,name:"crosshair",width:this.innerWidth,height:this.innerHeight,left:this.margin.left,top:this.margin.top,chartDm:this.chartDm});var e=null,i=this,n=Te["d"]().on("start",function(){e=Te["e"].x,i.crosshair.hide()}).on("drag",function(){var t=Math.round((Te["e"].x-e)/i.chartDm.barWidth);Math.abs(t)>0&&(e=Te["e"].x,i.move(t))}).on("end",function(){e=null,i.crosshair.show()});this.svg.call(n);var s=0,r=Te["p"]().on("zoom",function(){if(s+=Te["e"].sourceEvent.deltaY,Math.abs(s)>=t.ZOOM_SENSITIVITY){var e=Math.round(Math.abs(s)/t.ZOOM_SENSITIVITY);e=s>0?e:-e,i.debounce(i.zoom,200).bind(i)(e),s=0}});this.svg.call(r).on("dblclick.zoom",null)}},{key:"debounce",value:function(t,e){var i=null;return function(){var n=this,s=arguments;clearTimeout(i),i=setTimeout(function(){t.apply(n,s)},e)}}},{key:"addIndicator",value:function(t){var e=t.id;switch(this.indicators[e]=t,t.name){case"ma":this.indicators[e].calculator=new ti(t);break;case"boll":this.indicators[e].calculator=new ii(t);break}this.mainPlot.addIndicator(this.indicators[e])}},{key:"showIndicator",value:function(t){console.log(t),this.mainPlot.showIndicator(t.id,t.show)}},{key:"setSymbol",value:function(t){this.chartDm.symbol=t,setTimeout(this.draw.bind(this),0)}},{key:"setDuration",value:function(t){this.chartDm.duration=t,setTimeout(this.draw.bind(this),0)}},{key:"move",value:function(t){this.chartDm.moves(t),this.draw()}},{key:"zoom",value:function(t){var e=this.chartDm.barWidth;this.chartDm.barWidth-=t,e!==this.chartDm.barWidth&&this.draw()}},{key:"drawXAxis",value:function(){var t=this.chartDm.barNumbers*this.chartDm.barWidth-this.chartDm.barWidth;this.xScale.range()[1]!==t&&this.xScale.range([0,t]),this.xScale.domain([this.chartDm.left_id,this.chartDm.right_id]),this.rootG.selectAll("g.x.axis").attr("transform","translate("+this.chartDm.barWidth/2+","+(this.innerHeight+.5)+")");var e=this.chartDm.klines.data;this.xAxis.tickFormat(function(t){return e[t]&&e[t].datetime?hi(e[t].datetime/1e6):""}),this.rootG.selectAll("g.x.axis").call(this.xAxis)}},{key:"draw",value:function(){if(-1===this.chartDm.left_id||-1===this.chartDm.right_id)return!1;for(var t in this.loading.show&&(this.loading.show=!1),this.drawXAxis(),this.mainPlot.draw(),this.subPlots)this.subPlots[t].draw()}},{key:"width",get:function(){return this.outerWidth},set:function(e){if(!(e<this.margin.left+this.margin.right+t.INNER_WIDTH_MIN)){for(var i in this.outerWidth=e,this.innerWidth=this.outerWidth-this.margin.left-this.margin.right,this.svg.attr("width",this.outerWidth),this.chartDm.width=this.innerWidth,this.plotsManager.width=this.innerWidth,this.mainPlot.width=this.plotsManager.positions[0].width,this.subPlots)this.subPlots[i].width=this.plotsManager.positions[1].width;this.crosshair.width=this.innerWidth}}},{key:"height",get:function(){return this.outerHeight},set:function(e){if(!(e<this.margin.top+this.margin.bottom+t.INNER_HEIGHT_MIN)){for(var i in this.outerHeight=e,this.innerHeight=this.outerHeight-this.margin.top-this.margin.bottom,this.svg.attr("height",this.outerHeight),this.plotsManager.height=this.innerHeight,this.mainPlot.height=this.plotsManager.positions[0].height,this.mainPlot.top=this.plotsManager.positions[0].top,this.subPlots)this.subPlots[i].height=this.plotsManager.positions[1].height,this.subPlots[i].top=this.plotsManager.positions[1].top;this.crosshair.height=this.innerHeight}}}]),t}();Object(Se["a"])(di,"ZOOM_SENSITIVITY",3),Object(Se["a"])(di,"INNER_HEIGHT_MIN",50),Object(Se["a"])(di,"INNER_WIDTH_MIN",80);var _i=di,mi={"5s":5,"10s":10,"30s":30,"1m":60,"5m":300,"15m":900,"30m":1800,"1H":3600,"1D":86400},fi={name:"Chart",components:{},data:function(){return{width:this.$root.windowWidth,periods:Object.keys(mi),selectedPeriod:"1m",indicators:{ma3:{id:"ma3",name:"ma",params:3,show:!0},ma10:{id:"ma10",name:"ma",params:10,show:!0},ma30:{id:"ma30",name:"ma",params:30,show:!0},boll:{id:"boll",name:"boll",params:{n:3,p:5},show:!0}}}},computed:{duration:function(){return 1e9*mi[this.selectedPeriod]}},props:{instrumentId:{type:String,required:!0,default:"KQ.m@CFFEX.IF"},height:{type:Number,required:!0,default:400}},methods:{onchange:function(t){this.chart.showIndicator(this.indicators[t])}},watch:{instrumentId:{handler:function(t,e){this.$store.commit("SUBSCRIBE_QUOTE",[this.instrumentId]),this.chart&&this.chart.setSymbol(t)},immediate:!0},duration:{handler:function(t,e){this.chart&&this.chart.setDuration(t)},immediate:!0},height:{handler:function(t,e){this.chart&&(this.chart.height=this.$refs.CHART.clientHeight,this.chart.draw())},immediate:!0}},activated:function(){console.log("activated")},deactivated:function(){console.log("deactivated")},mounted:function(){this.$on("global:resize",function(){this.chart.height=this.$refs.CHART.clientHeight,this.chart.width=this.$refs.CHART.clientWidth,this.chart.draw()}),this.$nextTick(function(){var t=this.$refs.CHART.clientHeight,e=this.$refs.CHART.clientWidth,i={top:20,right:50,bottom:20,left:50};for(var n in this.chart=new _i({id:"CHART",width:e,height:t,margin:i,dm:st,ws:it,instrumentId:this.instrumentId,duration:this.duration}),this.indicators)this.chart.addIndicator(this.indicators[n])})},destroyed:function(){console.log("destroyed")}},pi=fi,gi=(i("cd60"),Object(c["a"])(pi,ke,Ee,!1,null,null,null));gi.options.__file="index.vue";var bi=gi.exports,vi={components:{Chart:bi},computed:{instrumentId:function(){return this.$route.params.instrument_id},height:function(){return this.$root.windowHeight*this.$root.appSplit}},created:function(){},mounted:function(){this.onKeyChange(27)},methods:{goBack:function(){this.$router.go(-1)},onKeyChange:function(t){var e=this;function i(i){i.keyCode===t&&e.goBack()}document.addEventListener?document.addEventListener("keypress",i,!0):document.attachEvent("onkeypress",i)}}},yi=vi,wi=(i("fac3"),Object(c["a"])(yi,ye,we,!1,null,"99e63f2e",null));wi.options.__file="Charts.vue";var ki=wi.exports,Ei=[{id:"主连",func:function(t){return"FUTURE_CONT"===t.class}},{id:"指数",func:function(t){return"FUTURE_INDEX"===t.class}},{id:"金融",func:function(t){return["IH","IF","IC","T","TF"].includes(t.product_id)||["CFFEX.IH","CFFEX.IF","CFFEX.IC","CFFEX.T","CFFEX.TF"].includes(t.underlying_product)}},{id:"金银",func:function(t){return["au","ag"].includes(t.product_id)||["SHFE.au","SHFE.ag"].includes(t.underlying_product)}},{id:"铜铝铅锌",func:function(t){return["al","cu","ni","pb","sn","zn"].includes(t.product_id)||["SHFE.al","SHFE.cu","SHFE.ni","SHFE.pb","SHFE.sn","SHFE.zn"].includes(t.underlying_product)}},{id:"双焦",func:function(t){return["j","jm"].includes(t.product_id)||["DCE.j","DCE.jm"].includes(t.underlying_product)}},{id:"钢铁",func:function(t){return["SF","SM","hc","i","rb"].includes(t.product_id)||["CZCE.SF","CZCE.SM","SHFE.hc","DCE.i","SHFE.rb"].includes(t.underlying_product)}},{id:"煤炭",func:function(t){return["ZC","j","jm"].includes(t.product_id)||["CZCE.ZC","DCE.j","DCE.jm"].includes(t.underlying_product)}},{id:"化工",func:function(t){return["MA","TA","bu","l","pp","ru","v"].includes(t.product_id)||["CZCE.MA","CZCE.TA","SHFE.bu","DCE.l","DCE.pp","SHFE.ru","DCE.v"].includes(t.underlying_product)}},{id:"油脂",func:function(t){return["OI","p","y"].includes(t.product_id)||["CZCE.OI","DCE.p","DCE.y"].includes(t.underlying_product)}},{id:"软商品",func:function(t){return["CF","CY","SR"].includes(t.product_id)||["CZCE.CF","CZCE.CY","CZCE.SR"].includes(t.underlying_product)}},{id:"谷物",func:function(t){return["JR","LR","RI","WH","a","c"].includes(t.product_id)||["CZCE.JR","CZCE.LR","CZCE.RI","CZCE.WH","DCE.a","DCE.c"].includes(t.underlying_product)}},{id:"农副",func:function(t){return["cs","jd"].includes(t.product_id)||["DCE.cs","DCE.jd"].includes(t.underlying_product)}},{id:"饲料",func:function(t){return["RM","c","m"].includes(t.product_id)||["CZCE.RM","DCE.c","DCE.m"].includes(t.underlying_product)}},{id:"建材",func:function(t){return["FG","rb"].includes(t.product_id)||["CZCE.FG","SHFE.rb"].includes(t.underlying_product)}}],Ti={};for(var Si in Ei)Ti[Ei[Si].id]=[];var Oi=Ei;n["default"].use(u["a"]);var Ci=new u["a"]({routes:[{path:"/quotes/:tag",name:"quotes",components:{quotes:St,user:ve}},{path:"/charts/:instrument_id",name:"charts",components:{quotes:ki,user:ve}},{path:"/*",redirect:"/quotes/"+Oi[0].id}]}),Di=(i("55dd"),{SET_WS_CONNECT_STATUS:function(t,e){Object.assign(t,e)},SET_SELECTED_SYMBOL:function(t,e){t.selectSymbol=e},SET_SELECTED_SHOW_SYMBOL:function(t,e){t.selectShowSymbol=e},SET_TAGS_QOUTES_MAP:function(t,e){var i={};for(var n in e){var s=e[n];for(var r in Oi){var a=Oi[r];a.func(s)&&(i[a.id]?i[a.id].push(n):i[a.id]=[n])}}for(var o in i)i[o].sort(function(t,i){var n=e[t].sort_key-e[i].sort_key;return 0===n?e[t].ins_id-e[i].ins_id:n});t.tagsQuotesMap=i},MERGE_QUOTE_WS_DATA:function(t,e){for(var i in e)switch(i){case"ins_list":t.ins_list=e["ins_list"].split(",").filter(function(t){return t.length>0});break;case"quotes":Qi.commit("quotes/UPDATE_QUOTES",e["quotes"]);break;default:break}},MERGE_TRADE_WS_DATA:function(t,e){if(e["notify"])for(var i in e["notify"]){var s=e["notify"][i];"SETTLEMENT"===s.type?(t.confirm="doing",t.confirmContent=s["content"]):"MESSAGE"===s.type?n["default"].prototype.$Message.info(s.content):n["default"].prototype.$Message.error(s.content)}if(e["trade"]&&e["trade"][t.user_id]){var r=e["trade"][t.user_id];for(var a in r)if(0!==Object.keys(r[a]).length)switch(a){case"session":t.trading_day=r["session"]["trading_day"];break;case"accounts":Qi.commit("accounts/UPDATE_ACCOUNTS",r["accounts"]);break;case"trades":Qi.commit("trades/UPDATE_TRADES",r["trades"]);break;case"positions":Qi.commit("positions/UPDATE_POSITIONS",r["positions"]);break;case"orders":Qi.commit("orders/UPDATE_ORDERS",r["orders"]);break;case"transfers":Qi.commit("transfers/UPDATE_TRANSFERS",r["transfers"]);break;case"banks":Qi.commit("banks/UPDATE_BANKS",r["banks"]);break}}},SET_BROKERS:function(t,e){t.brokers=e},SUBSCRIBE_QUOTE:function(t,e){var i=t.positions.PositionsSymbolsList,n=e.concat(i);n.length>0&&it.send({aid:"subscribe_quote",ins_list:n.join(",")})},SET_TICK_CHART:function(t,e){it.send({aid:"set_chart",chart_id:"web_tick_chart",ins_list:e.ins_list?e.ins_list.join(","):e.symbol,duration:0,view_width:e.view_width?e.view_width:100})},SET_CHART:function(t,e){var i={};e.trading_day_start||e.trading_day_count?(i.trading_day_start=e.trading_day_start?e.trading_day_start:0,i.trading_day_count=e.trading_day_count?e.trading_day_count:864e11):(i.view_width=e.view_width?e.view_width:500,e.left_kline_id?i.left_kline_id=e.left_kline_id:e.focus_datetime&&(i.focus_datetime=e.focus_datetime,i.focus_position=e.focus_position?e.focus_position:0)),it.send(Object.assign({aid:"set_chart",chart_id:"web_kline_chart",ins_list:e.ins_list?e.ins_list.join(","):e.symbol,duration:e.duration},i))},LOGIN:function(t,e){t.bid=e.bid,t.user_id=e.user_name,nt.send({aid:"req_login",bid:e.bid,user_name:e.user_name,password:e.password})},CONFIRM_SETTLEMENT:function(t,e){t.confirm="done",nt.send({aid:"confirm_settlement"})},INSERT_ORDER:function(t,e){var i={aid:"insert_order",user_id:t.user_id,price_type:"LIMIT",volume_condition:"ANY",time_condition:"GFD",exchange_id:e.exchange_id,instrument_id:e.ins_id,direction:e.direction,limit_price:e.limitPrice};if("SHFE"===e.exchange_id&&"CLOSE"===e.offset){var n=Qi.getters["positions/GET_POSITION"](e.symbol),s=0;"BUY"===e.direction&&n.volume_short_today>0?s=Math.min(n.volume_short_today,e.volume):"SELL"===e.direction&&n.volume_long_today>0&&(s=Math.min(n.volume_long_today,e.volume)),s>0&&nt.send(Object.assign({order_id:"TQWEB."+P(8),offset:"CLOSETODAY",volume:s},i)),e.volume-s>0&&nt.send(Object.assign({order_id:"TQWEB."+P(8),offset:"CLOSE",volume:e.volume-s},i))}else nt.send(Object.assign({order_id:"TQWEB."+P(8),offset:e.offset,volume:e.volume},i))},CANCEL_ORDER:function(t,e){nt.send({aid:"cancel_order",user_id:t.user_id,order_id:e.order_id})},TRANSFER:function(t,e){nt.send({aid:"req_transfer"})}}),xi={getBrokers:function(t){return t.brokers},getSelectedInstrumentId:function(t,e){return t.selectSymbol},getSelectedShowInstrumentId:function(t,e){return t.selectShowSymbol}},Pi={init:function(t){var e=t.commit;fetch(X,{headers:{Accept:"application/json; charset=utf-8"}}).then(function(t){return t.json()}).then(function(t){for(var i in n["default"].prototype.$Message.success("获取合约列表。"),t)(t[i].expired||"FUTURE_OPTION"===t[i].class)&&delete t[i];st.mergeData({quotes:t},!0,!1),e("quotes/INIT_QUOTES",t),e("SET_TAGS_QOUTES_MAP",t)}).catch(function(t){console.log("Fetch Error :-S",t),n["default"].prototype.$Message.error("获取合约列表失败，请检查网络后刷新页面。")})}},ji=function(t){return{namespaced:!0,state:function(){return Object.assign({},t)},mutations:{UPDATE:function(t,e){return Object.assign(t,e)}}}},Ii=ji({balance:"账户权益",available:"可用资金",pre_balance:"账户权益",deposit:"入金金额",withdraw:"出金金额",commission:"手续费",premium:"权利金",static_balance:"静态权益",position_profit:"持仓盈亏",float_profit:"浮动盈亏",risk_ratio:"风险度",margin:"占用资金",frozen_margin:"冻结保证金",frozen_commission:"冻结手续费",frozen_premium:"冻结权利金",close_profit:"平仓盈亏"}),Ni={namespaced:!0,state:{AccountsList:[]},mutations:{UPDATE_ACCOUNTS:function(t,e){for(var i in e)t[i]||Qi.registerModule(["accounts",i],Ii),Qi.commit("accounts/"+i+"/UPDATE",e[i])}},getters:{GET_ACCOUNT:function(t){var e={};for(var i in t.CNY){var n=t.CNY[i];"risk_ratio"===i?n=(100*n).toFixed(2)+"%":"number"===typeof n&&n%1!==0&&(n=n.toFixed(2)),e[i]=n}return e},GET_ACCOUNTS:function(t){return t.AccountsList}}},Li=ji({user_id:"",exchange_id:"",instrument_id:"",volume_long_today:0,volume_long_his:0,volume_long:0,volume_long_frozen_today:0,volume_long_frozen_his:0,volume_short_today:0,volume_short_his:0,volume_short:0,volume_short_frozen_today:0,volume_short_frozen_his:0,open_price_long:0,open_price_short:0,open_cost_long:0,open_cost_short:0,position_price_long:0,position_price_short:0,position_cost_long:0,position_cost_short:0,last_price:0,float_profit_long:0,float_profit_short:0,float_profit:0,position_profit_long:0,position_profit_short:0,position_profit:0,margin_long:0,margin_short:0,margin:0}),Ai={namespaced:!0,state:{PositionsList:[],PositionsSymbolsList:[]},mutations:{UPDATE_POSITIONS:function(t,e){for(var i in e)t[i]||(Qi.registerModule(["positions",i],Li),t.PositionsList.push(i)),Qi.commit("positions/"+i+"/UPDATE",e[i]);for(var n=0;n<t.PositionsList.length;n++){var s=t[t.PositionsList[n]].exchange_id+"."+t[t.PositionsList[n]].instrument_id;t.PositionsSymbolsList.includes(s)||t.PositionsSymbolsList.push(s)}}},getters:{GET_POSITION:function(t){return function(e){return t[e]}},GET_POSITIONS:function(t){for(var e=[],i=0;i<t.PositionsList.length;i++)(t[t.PositionsList[i]].volume_long>0||t[t.PositionsList[i]].volume_short>0)&&e.push(t[t.PositionsList[i]]);return e}}},Ri=Ai,Mi=ji({user_id:"",order_id:"",exchange_id:"",instrument_id:"",direction:"",offset:"",volume_orign:0,price_type:"",limit_price:0,time_condition:"",volume_condition:"",insert_date_time:0,exchange_order_id:"",status:"",volume_left:0,frozen_margin:0,last_msg:"",seqno:0}),qi={namespaced:!0,state:{OrdersList:[]},mutations:{UPDATE_ORDERS:function(t,e){for(var i in e)t[i]||(Qi.registerModule(["orders",i],Mi),t.OrdersList.push(i)),Qi.commit("orders/"+i+"/UPDATE",e[i])}},actions:{},getters:{GET_ORDERS:function(t){for(var e=[],i=0;i<t.OrdersList.length;i++)e.push(t[t.OrdersList[i]]);return e}}},Ui=(i("5df3"),i("4f7f"),ji({user_id:"",order_id:"",trade_id:"",exchange_id:"",instrument_id:"",exchange_trade_id:"",direction:"",offset:"",volume:0,price:0,trade_date_time:0,commission:0,seqno:0})),Wi={namespaced:!0,state:{TradesList:[]},mutations:{UPDATE_TRADES:function(t,e){for(var i in e)t[i]||(Qi.registerModule(["trades",i],Ui),t.TradesList.push(i)),Qi.commit("trades/"+i+"/UPDATE",e[i])}},getters:{GET_TRADES:function(t){for(var e=[],i=0;i<t.TradesList.length;i++)e.push(t[t.TradesList[i]]);return e},GET_TRADES_DISTINCT_INSID:function(t){for(var e=[],i=new Set,n=0;n<t.TradesList.length;n++){var s=t[t.TradesList[n]].instrument_id;i.add(s)}return i.forEach(function(t,i,n){e.push({text:t,value:t})}),e}}},$i=(ji({datetime:0,currency:"",amount:0,error_id:0,error_msg:""}),{namespaced:!0,state:{TransfersList:[]},mutations:{UPDATE_TRANSFERS:function(t,e){for(var i in e)t[i]||Qi.registerModule(["transfers",i],Trade),Qi.commit("transfers/"+i+"/UPDATE",e[i]),t.TransfersList.includes(t[i])||t.TransfersList.push(t[i])}},actions:{},getters:{GET_TRANSFERS:function(t){return t.TransfersList}}}),Bi=ji({id:"",name:""}),Fi={namespaced:!0,state:{BanksList:[]},mutations:{UPDATE_BANKS:function(t,e){for(var i in e)if(t[i]||Qi.registerModule(["banks",i],Bi),null===e[i]){var n=t.BanksList.indexOf(t[i]);n>-1&&t.BanksList.splice(n,1),Qi.unregisterModule(["banks",i])}else Qi.commit("banks/"+i+"/UPDATE",e[i]),t.BanksList.includes(t[i])&&t.BanksList.push(t[i])}},getters:{GET_POSITIONS:function(t){return t.BanksList}}},Hi=Object.assign({instrument_id:"",class:"",ins_id:"",ins_name:"",exchange_id:"",sort_key:"",expired:!1,py:"",product_id:"",product_short_name:"",underlying_product:"",underlying_symbol:"",delivery_year:0,delivery_month:0,expire_datetime:0,trading_time:{},volume_multiple:0,price_tick:0,price_decs:0},{max_market_order_volume:1e3,min_market_order_volume:1,max_limit_order_volume:1e3,min_limit_order_volume:1,margin:"-",commission:"-",datetime:"",ask_price1:"-",ask_volume1:"-",bid_price1:"-",bid_volume1:"-",last_price:"-",change:"-",highest:"-",lowest:"-",lower_limit:"-",upper_limit:"-",open:"-",close:"-",amount:"-",volume:"-",open_interest:"-",settlement:"-",average:"-",pre_open_interest:"-",pre_close:"-",pre_volume:"-",pre_settlement:"-"}),Gi=ji(Hi),zi={namespaced:!0,state:{SymbolsList:[]},mutations:{INIT_QUOTES:function(t,e){for(var i in e)Qi.registerModule(["quotes",i],Gi),Qi.commit("quotes/"+i+"/UPDATE",e[i]),"FUTURE"===e[i].class&&t.SymbolsList.push(i)},UPDATE_QUOTES:function(t,e){for(var i in e)t[i]||Qi.registerModule(["quotes",i],Gi),null!==e[i]&&Qi.commit("quotes/"+i+"/UPDATE",e[i]),t[i].change=t[i].last_price-t[i].pre_settlement,isNaN(t[i].change)&&(t[i].change="-")}},getters:{GET_QUOTE:function(t){return function(e){return t[e]}},GET_QUOTE_FIELD:function(t){return function(e,i){return t[e][i]}},GET_QUOTES_BY_LIST:function(t){return function(e){return e.map(function(e){return t[e]})}},GET_QUOTES_BY_INPUT:function(t){return function(e){var i=[];for(var n in e=e.toLowerCase(),t.SymbolsList){var s=t[t.SymbolsList[n]];(s.instrument_id.toLowerCase().includes(e)||s.ins_name.toLowerCase().includes(e))&&i.push(s.instrument_id)}if(i.length>0)return i;for(var r in t.SymbolsList){var a=t[t.SymbolsList[r]];a.py.includes(e)&&i.push(a.instrument_id)}return i}}}};n["default"].use(f["a"]);var Qi=new f["a"].Store({plugins:[rt],modules:{quotes:zi,accounts:Ni,positions:Ri,orders:qi,trades:Wi,transfers:$i,banks:Fi},state:{brokers:[],bid:"",user_id:"",trading_day:"",confirm:"done",confirmContent:"",selectShowSymbol:"KQ.m@CFFEX.IF",selectSymbol:"",quoteWsConnected:!1,tradeWsConnected:!1,ins_list:[],tags:Oi.map(function(t){return t.id}),tagsQuotesMap:Ti},mutations:Di,getters:xi,actions:Pi}),Yi=i("e069"),Ki=i.n(Yi);i("dcad");n["default"].use(Ki.a,{transfer:!0,size:"small"});i("ffc1"),i("20d6");var Zi=Number(n["default"].version.split(".")[0]),Xi=function(){},Ji={},Vi={},tn=/^global:/;function en(t){var e=t.prototype.$on,i=t.prototype.$emit;t.prototype.$on=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xi,n=this;return Array.isArray(t)?t.forEach(function(t){return n.$on(t,i)}):(tn.test(t)&&((Vi[n._uid]||(Vi[n._uid]=[])).push(t),(Ji[t]||(Ji[t]=[])).push(n)),e.call(n,t,i)),n},t.prototype.$emit=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];var r=this;if(tn.test(t)){var a=Ji[t]||[];a.forEach(function(e){return i.apply(e,[t].concat(n))})}else i.apply(r,[t].concat(n));return r}}function nn(t){t.mixin({beforeDestroy:function(){var t=this,e=Vi[t._uid]||[];e.forEach(function(e){var i=Ji[e].findIndex(function(e){return e._uid===t._uid});Ji[e].splice(i,1)}),delete Vi[t._uid],Object.entries(Ji).forEach(function(t){var e=Object(Qe["a"])(t,2),i=e[0],n=e[1];return n.length||delete Ji[i]})}})}function sn(t){Zi<2?console.error("[vue-event-proxy] only support Vue 2.0+"):sn.installed||(sn.installed=!0,en(t),nn(t))}n["default"].use(sn),n["default"].config.productionTip=!1,Qi.dispatch("init");var rn={name:"tianqin-web",windowHeight:window.innerHeight,windowWidth:window.innerWidth,appSplit:.6},an=new n["default"]({data:rn,router:Ci,store:Qi,render:function(t){return t(h)},methods:{handlerResize:function(){rn.windowHeight=window.innerHeight,rn.windowWidth=window.innerWidth,console.log("handlerResize"),this.$emit("global:resize")}},beforeCreate:function(){return console.log("beforeCreate")},created:function(){var t;function e(){t||(t=setTimeout(function(){t=null,an.handlerResize()},66))}window.addEventListener("resize",e,!1)},beforeMount:function(){return console.log("beforeMount")},mounted:function(){return console.log("mounted")},beforeDestroy:function(){return console.log("beforeDestroy")},destroyed:function(){return console.log("destroyed")}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var n=i("5e27"),s=i.n(n);s.a},"5e27":function(t,e,i){},8669:function(t,e,i){},"966f":function(t,e,i){"use strict";var n=i("a436"),s=i.n(n);s.a},a436:function(t,e,i){},ab6f:function(t,e,i){"use strict";var n=i("491c"),s=i.n(n);s.a},b885:function(t,e,i){},c7ff:function(t,e,i){},cd60:function(t,e,i){"use strict";var n=i("f193"),s=i.n(n);s.a},cfb6:function(t,e,i){},d860:function(t,e,i){"use strict";var n=i("4bbc"),s=i.n(n);s.a},dfaa:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return TqWebsocket});var _Users_yanqiong_Documents_shinny_shinny_futures_web_alpha_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("d4ec"),_Users_yanqiong_Documents_shinny_shinny_futures_web_alpha_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("bee2"),_Users_yanqiong_Documents_shinny_shinny_futures_web_alpha_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("99de"),_Users_yanqiong_Documents_shinny_shinny_futures_web_alpha_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("7e84"),_Users_yanqiong_Documents_shinny_shinny_futures_web_alpha_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("262e"),_event__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("0be0"),TqWebsocket=function(_EventTarget){function TqWebsocket(t){var e;return Object(_Users_yanqiong_Documents_shinny_shinny_futures_web_alpha_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["a"])(this,TqWebsocket),e=Object(_Users_yanqiong_Documents_shinny_shinny_futures_web_alpha_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__["a"])(this,Object(_Users_yanqiong_Documents_shinny_shinny_futures_web_alpha_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__["a"])(TqWebsocket).call(this)),t instanceof Array?(e.urlList=t,e.url=t[0]):(e.urlList=[t],e.url=t),e.ws=null,e.queue=[],e.reconnect=!0,e.reconnectTask=null,e.reconnectInterval=3e3,e.reconnectMaxTimes=5,e.reconnectTimes=0,e.reconnectUrlIndex=0,e.STATUS={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},e.init(),e}return Object(_Users_yanqiong_Documents_shinny_shinny_futures_web_alpha_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__["a"])(TqWebsocket,_EventTarget),Object(_Users_yanqiong_Documents_shinny_shinny_futures_web_alpha_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["a"])(TqWebsocket,[{key:"send",value:function(t){var e="string"===typeof t?t:JSON.stringify(t);this.isReady()?this.ws.send(e):this.queue.push(e)}},{key:"isReady",value:function(){return this.ws.readyState===this.STATUS.OPEN}},{key:"init",value:function init(){this.ws=new WebSocket(this.url);var _this=this;this.ws.onmessage=function(message){var data=eval("("+message.data+")");_this.fire("message",data)},this.ws.onclose=function(t){_this.fire("close"),_this.queue=[],_this.reconnect&&(_this.reconnectTask=setInterval(function(){3===_this.ws.readyState&&_this.init()},_this.reconnectInterval))},this.ws.onerror=function(t){console.error(t),_this.fire("error"),_this.ws.close()},this.ws.onopen=function(){_this.fire("open"),this.reconnectTask&&(clearInterval(_this.reconnectTask),_this.fire("reconnect"));while(_this.queue.length>0){if(1!==_this.ws.readyState)break;_this.ws.send(_this.queue.shift())}}}}]),TqWebsocket}(_event__WEBPACK_IMPORTED_MODULE_5__["a"])},e86d:function(t,e,i){"use strict";var n=i("8669"),s=i.n(n);s.a},f193:function(t,e,i){},f8fe:function(t,e,i){"use strict";var n=i("cfb6"),s=i.n(n);s.a},fac3:function(t,e,i){"use strict";var n=i("c7ff"),s=i.n(n);s.a}});